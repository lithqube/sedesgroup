/**
 * Isotope v1.5.25
 * An exquisite jQuery plugin for magical layouts
 * http://isotope.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://isotope.metafizzy.co/docs/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright 2013 Metafizzy
 */

/*jshint asi: true, browser: true, curly: true, eqeqeq: true, forin: false, immed: false, newcap: true, noempty: true, strict: true, undef: true */
/*global jQuery: false */

(function( window, $, undefined ){

  'use strict';

  // get global vars
  var document = window.document;
  var Modernizr = window.Modernizr;

  // helper function
  var capitalize = function( str ) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  };

  // ========================= getStyleProperty by kangax ===============================
  // http://perfectionkills.com/feature-testing-css-properties/

  var prefixes = 'Moz Webkit O Ms'.split(' ');

  var getStyleProperty = function( propName ) {
    var style = document.documentElement.style,
        prefixed;

    // test standard property first
    if ( typeof style[propName] === 'string' ) {
      return propName;
    }

    // capitalize
    propName = capitalize( propName );

    // test vendor specific properties
    for ( var i=0, len = prefixes.length; i < len; i++ ) {
      prefixed = prefixes[i] + propName;
      if ( typeof style[ prefixed ] === 'string' ) {
        return prefixed;
      }
    }
  };

  var transformProp = getStyleProperty('transform'),
      transitionProp = getStyleProperty('transitionProperty');


  // ========================= miniModernizr ===============================
  // <3<3<3 and thanks to Faruk and Paul for doing the heavy lifting

  /*!
   * Modernizr v1.6ish: miniModernizr for Isotope
   * http://www.modernizr.com
   *
   * Developed by:
   * - Faruk Ates  http://farukat.es/
   * - Paul Irish  http://paulirish.com/
   *
   * Copyright (c) 2009-2010
   * Dual-licensed under the BSD or MIT licenses.
   * http://www.modernizr.com/license/
   */

  /*
   * This version whittles down the script just to check support for
   * CSS transitions, transforms, and 3D transforms.
  */

  var tests = {
    csstransforms: function() {
      return !!transformProp;
    },

    csstransforms3d: function() {
      var test = !!getStyleProperty('perspective');
      // double check for Chrome's false positive
      if ( test ) {
        var vendorCSSPrefixes = ' -o- -moz- -ms- -webkit- -khtml- '.split(' '),
            mediaQuery = '@media (' + vendorCSSPrefixes.join('transform-3d),(') + 'modernizr)',
            $style = $('<style>' + mediaQuery + '{#modernizr{height:3px}}' + '</style>')
                        .appendTo('head'),
            $div = $('<div id="modernizr" />').appendTo('html');

        test = $div.height() === 3;

        $div.remove();
        $style.remove();
      }
      return test;
    },

    csstransitions: function() {
      return !!transitionProp;
    }
  };

  var testName;

  if ( Modernizr ) {
    // if there's a previous Modernzir, check if there are necessary tests
    for ( testName in tests) {
      if ( !Modernizr.hasOwnProperty( testName ) ) {
        // if test hasn't been run, use addTest to run it
        Modernizr.addTest( testName, tests[ testName ] );
      }
    }
  } else {
    // or create new mini Modernizr that just has the 3 tests
    Modernizr = window.Modernizr = {
      _version : '1.6ish: miniModernizr for Isotope'
    };

    var classes = ' ';
    var result;

    // Run through tests
    for ( testName in tests) {
      result = tests[ testName ]();
      Modernizr[ testName ] = result;
      classes += ' ' + ( result ?  '' : 'no-' ) + testName;
    }

    // Add the new classes to the <html> element.
    $('html').addClass( classes );
  }


  // ========================= isoTransform ===============================

  /**
   *  provides hooks for .css({ scale: value, translate: [x, y] })
   *  Progressively enhanced CSS transforms
   *  Uses hardware accelerated 3D transforms for Safari
   *  or falls back to 2D transforms.
   */

  if ( Modernizr.csstransforms ) {

        // i.e. transformFnNotations.scale(0.5) >> 'scale3d( 0.5, 0.5, 1)'
    var transformFnNotations = Modernizr.csstransforms3d ?
      { // 3D transform functions
        translate : function ( position ) {
          return 'translate3d(' + position[0] + 'px, ' + position[1] + 'px, 0) ';
        },
        scale : function ( scale ) {
          return 'scale3d(' + scale + ', ' + scale + ', 1) ';
        }
      } :
      { // 2D transform functions
        translate : function ( position ) {
          return 'translate(' + position[0] + 'px, ' + position[1] + 'px) ';
        },
        scale : function ( scale ) {
          return 'scale(' + scale + ') ';
        }
      }
    ;

    var setIsoTransform = function ( elem, name, value ) {
          // unpack current transform data
      var data =  $.data( elem, 'isoTransform' ) || {},
          newData = {},
          fnName,
          transformObj = {},
          transformValue;

      // i.e. newData.scale = 0.5
      newData[ name ] = value;
      // extend new value over current data
      $.extend( data, newData );

      for ( fnName in data ) {
        transformValue = data[ fnName ];
        transformObj[ fnName ] = transformFnNotations[ fnName ]( transformValue );
      }

      // get proper order
      // ideally, we could loop through this give an array, but since we only have
      // a couple transforms we're keeping track of, we'll do it like so
      var translateFn = transformObj.translate || '',
          scaleFn = transformObj.scale || '',
          // sorting so translate always comes first
          valueFns = translateFn + scaleFn;

      // set data back in elem
      $.data( elem, 'isoTransform', data );

      // set name to vendor specific property
      elem.style[ transformProp ] = valueFns;
    };

    // ==================== scale ===================

    $.cssNumber.scale = true;

    $.cssHooks.scale = {
      set: function( elem, value ) {
        // uncomment this bit if you want to properly parse strings
        // if ( typeof value === 'string' ) {
        //   value = parseFloat( value );
        // }
        setIsoTransform( elem, 'scale', value );
      },
      get: function( elem, computed ) {
        var transform = $.data( elem, 'isoTransform' );
        return transform && transform.scale ? transform.scale : 1;
      }
    };

    $.fx.step.scale = function( fx ) {
      $.cssHooks.scale.set( fx.elem, fx.now+fx.unit );
    };


    // ==================== translate ===================

    $.cssNumber.translate = true;

    $.cssHooks.translate = {
      set: function( elem, value ) {

        // uncomment this bit if you want to properly parse strings
        // if ( typeof value === 'string' ) {
        //   value = value.split(' ');
        // }
        //
        // var i, val;
        // for ( i = 0; i < 2; i++ ) {
        //   val = value[i];
        //   if ( typeof val === 'string' ) {
        //     val = parseInt( val );
        //   }
        // }

        setIsoTransform( elem, 'translate', value );
      },

      get: function( elem, computed ) {
        var transform = $.data( elem, 'isoTransform' );
        return transform && transform.translate ? transform.translate : [ 0, 0 ];
      }
    };

  }

  // ========================= get transition-end event ===============================
  var transitionEndEvent, transitionDurProp;

  if ( Modernizr.csstransitions ) {
    transitionEndEvent = {
      WebkitTransitionProperty: 'webkitTransitionEnd',  // webkit
      MozTransitionProperty: 'transitionend',
      OTransitionProperty: 'oTransitionEnd otransitionend',
      transitionProperty: 'transitionend'
    }[ transitionProp ];

    transitionDurProp = getStyleProperty('transitionDuration');
  }

  // ========================= smartresize ===============================

  /*
   * smartresize: debounced resize event for jQuery
   *
   * latest version and complete README available on Github:
   * https://github.com/louisremi/jquery.smartresize.js
   *
   * Copyright 2011 @louis_remi
   * Licensed under the MIT license.
   */

  var $event = $.event,
      dispatchMethod = $.event.handle ? 'handle' : 'dispatch',
      resizeTimeout;

  $event.special.smartresize = {
    setup: function() {
      $(this).bind( "resize", $event.special.smartresize.handler );
    },
    teardown: function() {
      $(this).unbind( "resize", $event.special.smartresize.handler );
    },
    handler: function( event, execAsap ) {
      // Save the context
      var context = this,
          args = arguments;

      // set correct event type
      event.type = "smartresize";

      if ( resizeTimeout ) { clearTimeout( resizeTimeout ); }
      resizeTimeout = setTimeout(function() {
        $event[ dispatchMethod ].apply( context, args );
      }, execAsap === "execAsap"? 0 : 100 );
    }
  };

  $.fn.smartresize = function( fn ) {
    return fn ? this.bind( "smartresize", fn ) : this.trigger( "smartresize", ["execAsap"] );
  };



// ========================= Isotope ===============================


  // our "Widget" object constructor
  $.Isotope = function( options, element, callback ){
    this.element = $( element );

    this._create( options );
    this._init( callback );
  };

  // styles of container element we want to keep track of
  var isoContainerStyles = [ 'width', 'height' ];

  var $window = $(window);

  $.Isotope.settings = {
    resizable: true,
    layoutMode : 'masonry',
    containerClass : 'isotope',
    itemClass : 'isotope-item',
    hiddenClass : 'isotope-hidden',
    hiddenStyle: { opacity: 0, scale: 0.001 },
    visibleStyle: { opacity: 1, scale: 1 },
    containerStyle: {
      position: 'relative',
      overflow: 'hidden'
    },
    animationEngine: 'best-available',
    animationOptions: {
      queue: false,
      duration: 800
    },
    sortBy : 'original-order',
    sortAscending : true,
    resizesContainer : true,
    transformsEnabled: true,
    itemPositionDataEnabled: false
  };

  $.Isotope.prototype = {

    // sets up widget
    _create : function( options ) {

      this.options = $.extend( {}, $.Isotope.settings, options );

      this.styleQueue = [];
      this.elemCount = 0;

      // get original styles in case we re-apply them in .destroy()
      var elemStyle = this.element[0].style;
      this.originalStyle = {};
      // keep track of container styles
      var containerStyles = isoContainerStyles.slice(0);
      for ( var prop in this.options.containerStyle ) {
        containerStyles.push( prop );
      }
      for ( var i=0, len = containerStyles.length; i < len; i++ ) {
        prop = containerStyles[i];
        this.originalStyle[ prop ] = elemStyle[ prop ] || '';
      }
      // apply container style from options
      this.element.css( this.options.containerStyle );

      this._updateAnimationEngine();
      this._updateUsingTransforms();

      // sorting
      var originalOrderSorter = {
        'original-order' : function( $elem, instance ) {
          instance.elemCount ++;
          return instance.elemCount;
        },
        random : function() {
          return Math.random();
        }
      };

      this.options.getSortData = $.extend( this.options.getSortData, originalOrderSorter );

      // need to get atoms
      this.reloadItems();

      // get top left position of where the bricks should be
      this.offset = {
        left: parseInt( ( this.element.css('padding-left') || 0 ), 10 ),
        top: parseInt( ( this.element.css('padding-top') || 0 ), 10 )
      };

      // add isotope class first time around
      var instance = this;
      setTimeout( function() {
        instance.element.addClass( instance.options.containerClass );
      }, 0 );

      // bind resize method
      if ( this.options.resizable ) {
        $window.bind( 'smartresize.isotope', function() {
          instance.resize();
        });
      }

      // dismiss all click events from hidden events
      this.element.delegate( '.' + this.options.hiddenClass, 'click', function(){
        return false;
      });

    },

    _getAtoms : function( $elems ) {
      var selector = this.options.itemSelector,
          // filter & find
          $atoms = selector ? $elems.filter( selector ).add( $elems.find( selector ) ) : $elems,
          // base style for atoms
          atomStyle = { position: 'absolute' };

      // filter out text nodes
      $atoms = $atoms.filter( function( i, atom ) {
        return atom.nodeType === 1;
      });

      if ( this.usingTransforms ) {
        atomStyle.left = 0;
        atomStyle.top = 0;
      }

      $atoms.css( atomStyle ).addClass( this.options.itemClass );

      this.updateSortData( $atoms, true );

      return $atoms;
    },

    // _init fires when your instance is first created
    // (from the constructor above), and when you
    // attempt to initialize the widget again (by the bridge)
    // after it has already been initialized.
    _init : function( callback ) {

      this.$filteredAtoms = this._filter( this.$allAtoms );
      this._sort();
      this.reLayout( callback );

    },

    option : function( opts ){
      // change options AFTER initialization:
      // signature: $('#foo').bar({ cool:false });
      if ( $.isPlainObject( opts ) ){
        this.options = $.extend( true, this.options, opts );

        // trigger _updateOptionName if it exists
        var updateOptionFn;
        for ( var optionName in opts ) {
          updateOptionFn = '_update' + capitalize( optionName );
          if ( this[ updateOptionFn ] ) {
            this[ updateOptionFn ]();
          }
        }
      }
    },

    // ====================== updaters ====================== //
    // kind of like setters

    _updateAnimationEngine : function() {
      var animationEngine = this.options.animationEngine.toLowerCase().replace( /[ _\-]/g, '');
      var isUsingJQueryAnimation;
      // set applyStyleFnName
      switch ( animationEngine ) {
        case 'css' :
        case 'none' :
          isUsingJQueryAnimation = false;
          break;
        case 'jquery' :
          isUsingJQueryAnimation = true;
          break;
        default : // best available
          isUsingJQueryAnimation = !Modernizr.csstransitions;
      }
      this.isUsingJQueryAnimation = isUsingJQueryAnimation;
      this._updateUsingTransforms();
    },

    _updateTransformsEnabled : function() {
      this._updateUsingTransforms();
    },

    _updateUsingTransforms : function() {
      var usingTransforms = this.usingTransforms = this.options.transformsEnabled &&
        Modernizr.csstransforms && Modernizr.csstransitions && !this.isUsingJQueryAnimation;

      // prevent scales when transforms are disabled
      if ( !usingTransforms ) {
        delete this.options.hiddenStyle.scale;
        delete this.options.visibleStyle.scale;
      }

      this.getPositionStyles = usingTransforms ? this._translate : this._positionAbs;
    },


    // ====================== Filtering ======================

    _filter : function( $atoms ) {
      var filter = this.options.filter === '' ? '*' : this.options.filter;

      if ( !filter ) {
        return $atoms;
      }

      var hiddenClass    = this.options.hiddenClass,
          hiddenSelector = '.' + hiddenClass,
          $hiddenAtoms   = $atoms.filter( hiddenSelector ),
          $atomsToShow   = $hiddenAtoms;

      if ( filter !== '*' ) {
        $atomsToShow = $hiddenAtoms.filter( filter );
        var $atomsToHide = $atoms.not( hiddenSelector ).not( filter ).addClass( hiddenClass );
        this.styleQueue.push({ $el: $atomsToHide, style: this.options.hiddenStyle });
      }

      this.styleQueue.push({ $el: $atomsToShow, style: this.options.visibleStyle });
      $atomsToShow.removeClass( hiddenClass );

      return $atoms.filter( filter );
    },

    // ====================== Sorting ======================

    updateSortData : function( $atoms, isIncrementingElemCount ) {
      var instance = this,
          getSortData = this.options.getSortData,
          $this, sortData;
      $atoms.each(function(){
        $this = $(this);
        sortData = {};
        // get value for sort data based on fn( $elem ) passed in
        for ( var key in getSortData ) {
          if ( !isIncrementingElemCount && key === 'original-order' ) {
            // keep original order original
            sortData[ key ] = $.data( this, 'isotope-sort-data' )[ key ];
          } else {
            sortData[ key ] = getSortData[ key ]( $this, instance );
          }
        }
        // apply sort data to element
        $.data( this, 'isotope-sort-data', sortData );
      });
    },

    // used on all the filtered atoms
    _sort : function() {

      var sortBy = this.options.sortBy,
          getSorter = this._getSorter,
          sortDir = this.options.sortAscending ? 1 : -1,
          sortFn = function( alpha, beta ) {
            var a = getSorter( alpha, sortBy ),
                b = getSorter( beta, sortBy );
            // fall back to original order if data matches
            if ( a === b && sortBy !== 'original-order') {
              a = getSorter( alpha, 'original-order' );
              b = getSorter( beta, 'original-order' );
            }
            return ( ( a > b ) ? 1 : ( a < b ) ? -1 : 0 ) * sortDir;
          };

      this.$filteredAtoms.sort( sortFn );
    },

    _getSorter : function( elem, sortBy ) {
      return $.data( elem, 'isotope-sort-data' )[ sortBy ];
    },

    // ====================== Layout Helpers ======================

    _translate : function( x, y ) {
      return { translate : [ x, y ] };
    },

    _positionAbs : function( x, y ) {
      return { left: x, top: y };
    },

    _pushPosition : function( $elem, x, y ) {
      x = Math.round( x + this.offset.left );
      y = Math.round( y + this.offset.top );
      var position = this.getPositionStyles( x, y );
      this.styleQueue.push({ $el: $elem, style: position });
      if ( this.options.itemPositionDataEnabled ) {
        $elem.data('isotope-item-position', {x: x, y: y} );
      }
    },


    // ====================== General Layout ======================

    // used on collection of atoms (should be filtered, and sorted before )
    // accepts atoms-to-be-laid-out to start with
    layout : function( $elems, callback ) {

      var layoutMode = this.options.layoutMode;

      // layout logic
      this[ '_' +  layoutMode + 'Layout' ]( $elems );

      // set the size of the container
      if ( this.options.resizesContainer ) {
        var containerStyle = this[ '_' +  layoutMode + 'GetContainerSize' ]();
        this.styleQueue.push({ $el: this.element, style: containerStyle });
      }

      this._processStyleQueue( $elems, callback );

      this.isLaidOut = true;
    },

    _processStyleQueue : function( $elems, callback ) {
      // are we animating the layout arrangement?
      // use plugin-ish syntax for css or animate
      var styleFn = !this.isLaidOut ? 'css' : (
            this.isUsingJQueryAnimation ? 'animate' : 'css'
          ),
          animOpts = this.options.animationOptions,
          onLayout = this.options.onLayout,
          objStyleFn, processor,
          triggerCallbackNow, callbackFn;

      // default styleQueue processor, may be overwritten down below
      processor = function( i, obj ) {
        obj.$el[ styleFn ]( obj.style, animOpts );
      };

      if ( this._isInserting && this.isUsingJQueryAnimation ) {
        // if using styleQueue to insert items
        processor = function( i, obj ) {
          // only animate if it not being inserted
          objStyleFn = obj.$el.hasClass('no-transition') ? 'css' : styleFn;
          obj.$el[ objStyleFn ]( obj.style, animOpts );
        };

      } else if ( callback || onLayout || animOpts.complete ) {
        // has callback
        var isCallbackTriggered = false,
            // array of possible callbacks to trigger
            callbacks = [ callback, onLayout, animOpts.complete ],
            instance = this;
        triggerCallbackNow = true;
        // trigger callback only once
        callbackFn = function() {
          if ( isCallbackTriggered ) {
            return;
          }
          var hollaback;
          for (var i=0, len = callbacks.length; i < len; i++) {
            hollaback = callbacks[i];
            if ( typeof hollaback === 'function' ) {
              hollaback.call( instance.element, $elems, instance );
            }
          }
          isCallbackTriggered = true;
        };

        if ( this.isUsingJQueryAnimation && styleFn === 'animate' ) {
          // add callback to animation options
          animOpts.complete = callbackFn;
          triggerCallbackNow = false;

        } else if ( Modernizr.csstransitions ) {
          // detect if first item has transition
          var i = 0,
              firstItem = this.styleQueue[0],
              testElem = firstItem && firstItem.$el,
              styleObj;
          // get first non-empty jQ object
          while ( !testElem || !testElem.length ) {
            styleObj = this.styleQueue[ i++ ];
            // HACK: sometimes styleQueue[i] is undefined
            if ( !styleObj ) {
              return;
            }
            testElem = styleObj.$el;
          }
          // get transition duration of the first element in that object
          // yeah, this is inexact
          var duration = parseFloat( getComputedStyle( testElem[0] )[ transitionDurProp ] );
          if ( duration > 0 ) {
            processor = function( i, obj ) {
              obj.$el[ styleFn ]( obj.style, animOpts )
                // trigger callback at transition end
                .one( transitionEndEvent, callbackFn );
            };
            triggerCallbackNow = false;
          }
        }
      }

      // process styleQueue
      $.each( this.styleQueue, processor );

      if ( triggerCallbackNow ) {
        callbackFn();
      }

      // clear out queue for next time
      this.styleQueue = [];
    },


    resize : function() {
      if ( this[ '_' + this.options.layoutMode + 'ResizeChanged' ]() ) {
        this.reLayout();
      }
    },


    reLayout : function( callback ) {

      this[ '_' +  this.options.layoutMode + 'Reset' ]();
      this.layout( this.$filteredAtoms, callback );

    },

    // ====================== Convenience methods ======================

    // ====================== Adding items ======================

    // adds a jQuery object of items to a isotope container
    addItems : function( $content, callback ) {
      var $newAtoms = this._getAtoms( $content );
      // add new atoms to atoms pools
      this.$allAtoms = this.$allAtoms.add( $newAtoms );

      if ( callback ) {
        callback( $newAtoms );
      }
    },

    // convienence method for adding elements properly to any layout
    // positions items, hides them, then animates them back in <--- very sezzy
    insert : function( $content, callback ) {
      // position items
      this.element.append( $content );

      var instance = this;
      this.addItems( $content, function( $newAtoms ) {
        var $newFilteredAtoms = instance._filter( $newAtoms );
        instance._addHideAppended( $newFilteredAtoms );
        instance._sort();
        instance.reLayout();
        instance._revealAppended( $newFilteredAtoms, callback );
      });

    },

    // convienence method for working with Infinite Scroll
    appended : function( $content, callback ) {
      var instance = this;
      this.addItems( $content, function( $newAtoms ) {
        instance._addHideAppended( $newAtoms );
        instance.layout( $newAtoms );
        instance._revealAppended( $newAtoms, callback );
      });
    },

    // adds new atoms, then hides them before positioning
    _addHideAppended : function( $newAtoms ) {
      this.$filteredAtoms = this.$filteredAtoms.add( $newAtoms );
      $newAtoms.addClass('no-transition');

      this._isInserting = true;

      // apply hidden styles
      this.styleQueue.push({ $el: $newAtoms, style: this.options.hiddenStyle });
    },

    // sets visible style on new atoms
    _revealAppended : function( $newAtoms, callback ) {
      var instance = this;
      // apply visible style after a sec
      setTimeout( function() {
        // enable animation
        $newAtoms.removeClass('no-transition');
        // reveal newly inserted filtered elements
        instance.styleQueue.push({ $el: $newAtoms, style: instance.options.visibleStyle });
        instance._isInserting = false;
        instance._processStyleQueue( $newAtoms, callback );
      }, 10 );
    },

    // gathers all atoms
    reloadItems : function() {
      this.$allAtoms = this._getAtoms( this.element.children() );
    },

    // removes elements from Isotope widget
    remove: function( $content, callback ) {
      // remove elements immediately from Isotope instance
      this.$allAtoms = this.$allAtoms.not( $content );
      this.$filteredAtoms = this.$filteredAtoms.not( $content );
      // remove() as a callback, for after transition / animation
      var instance = this;
      var removeContent = function() {
        $content.remove();
        if ( callback ) {
          callback.call( instance.element );
        }
      };

      if ( $content.filter( ':not(.' + this.options.hiddenClass + ')' ).length ) {
        // if any non-hidden content needs to be removed
        this.styleQueue.push({ $el: $content, style: this.options.hiddenStyle });
        this._sort();
        this.reLayout( removeContent );
      } else {
        // remove it now
        removeContent();
      }

    },

    shuffle : function( callback ) {
      this.updateSortData( this.$allAtoms );
      this.options.sortBy = 'random';
      this._sort();
      this.reLayout( callback );
    },

    // destroys widget, returns elements and container back (close) to original style
    destroy : function() {

      var usingTransforms = this.usingTransforms;
      var options = this.options;

      this.$allAtoms
        .removeClass( options.hiddenClass + ' ' + options.itemClass )
        .each(function(){
          var style = this.style;
          style.position = '';
          style.top = '';
          style.left = '';
          style.opacity = '';
          if ( usingTransforms ) {
            style[ transformProp ] = '';
          }
        });

      // re-apply saved container styles
      var elemStyle = this.element[0].style;
      for ( var prop in this.originalStyle ) {
        elemStyle[ prop ] = this.originalStyle[ prop ];
      }

      this.element
        .unbind('.isotope')
        .undelegate( '.' + options.hiddenClass, 'click' )
        .removeClass( options.containerClass )
        .removeData('isotope');

      $window.unbind('.isotope');

    },


    // ====================== LAYOUTS ======================

    // calculates number of rows or columns
    // requires columnWidth or rowHeight to be set on namespaced object
    // i.e. this.masonry.columnWidth = 200
    _getSegments : function( isRows ) {
      var namespace = this.options.layoutMode,
          measure  = isRows ? 'rowHeight' : 'columnWidth',
          size     = isRows ? 'height' : 'width',
          segmentsName = isRows ? 'rows' : 'cols',
          containerSize = this.element[ size ](),
          segments,
                    // i.e. options.masonry && options.masonry.columnWidth
          segmentSize = this.options[ namespace ] && this.options[ namespace ][ measure ] ||
                    // or use the size of the first item, i.e. outerWidth
                    this.$filteredAtoms[ 'outer' + capitalize(size) ](true) ||
                    // if there's no items, use size of container
                    containerSize;

      segments = Math.floor( containerSize / segmentSize );
      segments = Math.max( segments, 1 );

      // i.e. this.masonry.cols = ....
      this[ namespace ][ segmentsName ] = segments;
      // i.e. this.masonry.columnWidth = ...
      this[ namespace ][ measure ] = segmentSize;

    },

    _checkIfSegmentsChanged : function( isRows ) {
      var namespace = this.options.layoutMode,
          segmentsName = isRows ? 'rows' : 'cols',
          prevSegments = this[ namespace ][ segmentsName ];
      // update cols/rows
      this._getSegments( isRows );
      // return if updated cols/rows is not equal to previous
      return ( this[ namespace ][ segmentsName ] !== prevSegments );
    },

    // ====================== Masonry ======================

    _masonryReset : function() {
      // layout-specific props
      this.masonry = {};
      // FIXME shouldn't have to call this again
      this._getSegments();
      var i = this.masonry.cols;
      this.masonry.colYs = [];
      while (i--) {
        this.masonry.colYs.push( 0 );
      }
    },

    _masonryLayout : function( $elems ) {
      var instance = this,
          props = instance.masonry;
      $elems.each(function(){
        var $this  = $(this),
            //how many columns does this brick span
            colSpan = Math.ceil( $this.outerWidth(true) / props.columnWidth );
        colSpan = Math.min( colSpan, props.cols );

        if ( colSpan === 1 ) {
          // if brick spans only one column, just like singleMode
          instance._masonryPlaceBrick( $this, props.colYs );
        } else {
          // brick spans more than one column
          // how many different places could this brick fit horizontally
          var groupCount = props.cols + 1 - colSpan,
              groupY = [],
              groupColY,
              i;

          // for each group potential horizontal position
          for ( i=0; i < groupCount; i++ ) {
            // make an array of colY values for that one group
            groupColY = props.colYs.slice( i, i+colSpan );
            // and get the max value of the array
            groupY[i] = Math.max.apply( Math, groupColY );
          }

          instance._masonryPlaceBrick( $this, groupY );
        }
      });
    },

    // worker method that places brick in the columnSet
    //   with the the minY
    _masonryPlaceBrick : function( $brick, setY ) {
      // get the minimum Y value from the columns
      var minimumY = Math.min.apply( Math, setY ),
          shortCol = 0;

      // Find index of short column, the first from the left
      for (var i=0, len = setY.length; i < len; i++) {
        if ( setY[i] === minimumY ) {
          shortCol = i;
          break;
        }
      }

      // position the brick
      var x = this.masonry.columnWidth * shortCol,
          y = minimumY;
      this._pushPosition( $brick, x, y );

      // apply setHeight to necessary columns
      var setHeight = minimumY + $brick.outerHeight(true),
          setSpan = this.masonry.cols + 1 - len;
      for ( i=0; i < setSpan; i++ ) {
        this.masonry.colYs[ shortCol + i ] = setHeight;
      }

    },

    _masonryGetContainerSize : function() {
      var containerHeight = Math.max.apply( Math, this.masonry.colYs );
      return { height: containerHeight };
    },

    _masonryResizeChanged : function() {
      return this._checkIfSegmentsChanged();
    },

    // ====================== fitRows ======================

    _fitRowsReset : function() {
      this.fitRows = {
        x : 0,
        y : 0,
        height : 0
      };
    },

    _fitRowsLayout : function( $elems ) {
      var instance = this,
          containerWidth = this.element.width(),
          props = this.fitRows;

      $elems.each( function() {
        var $this = $(this),
            atomW = $this.outerWidth(true),
            atomH = $this.outerHeight(true);

        if ( props.x !== 0 && atomW + props.x > containerWidth ) {
          // if this element cannot fit in the current row
          props.x = 0;
          props.y = props.height;
        }

        // position the atom
        instance._pushPosition( $this, props.x, props.y );

        props.height = Math.max( props.y + atomH, props.height );
        props.x += atomW;

      });
    },

    _fitRowsGetContainerSize : function () {
      return { height : this.fitRows.height };
    },

    _fitRowsResizeChanged : function() {
      return true;
    },


    // ====================== cellsByRow ======================

    _cellsByRowReset : function() {
      this.cellsByRow = {
        index : 0
      };
      // get this.cellsByRow.columnWidth
      this._getSegments();
      // get this.cellsByRow.rowHeight
      this._getSegments(true);
    },

    _cellsByRowLayout : function( $elems ) {
      var instance = this,
          props = this.cellsByRow;
      $elems.each( function(){
        var $this = $(this),
            col = props.index % props.cols,
            row = Math.floor( props.index / props.cols ),
            x = ( col + 0.5 ) * props.columnWidth - $this.outerWidth(true) / 2,
            y = ( row + 0.5 ) * props.rowHeight - $this.outerHeight(true) / 2;
        instance._pushPosition( $this, x, y );
        props.index ++;
      });
    },

    _cellsByRowGetContainerSize : function() {
      return { height : Math.ceil( this.$filteredAtoms.length / this.cellsByRow.cols ) * this.cellsByRow.rowHeight + this.offset.top };
    },

    _cellsByRowResizeChanged : function() {
      return this._checkIfSegmentsChanged();
    },


    // ====================== straightDown ======================

    _straightDownReset : function() {
      this.straightDown = {
        y : 0
      };
    },

    _straightDownLayout : function( $elems ) {
      var instance = this;
      $elems.each( function( i ){
        var $this = $(this);
        instance._pushPosition( $this, 0, instance.straightDown.y );
        instance.straightDown.y += $this.outerHeight(true);
      });
    },

    _straightDownGetContainerSize : function() {
      return { height : this.straightDown.y };
    },

    _straightDownResizeChanged : function() {
      return true;
    },


    // ====================== masonryHorizontal ======================

    _masonryHorizontalReset : function() {
      // layout-specific props
      this.masonryHorizontal = {};
      // FIXME shouldn't have to call this again
      this._getSegments( true );
      var i = this.masonryHorizontal.rows;
      this.masonryHorizontal.rowXs = [];
      while (i--) {
        this.masonryHorizontal.rowXs.push( 0 );
      }
    },

    _masonryHorizontalLayout : function( $elems ) {
      var instance = this,
          props = instance.masonryHorizontal;
      $elems.each(function(){
        var $this  = $(this),
            //how many rows does this brick span
            rowSpan = Math.ceil( $this.outerHeight(true) / props.rowHeight );
        rowSpan = Math.min( rowSpan, props.rows );

        if ( rowSpan === 1 ) {
          // if brick spans only one column, just like singleMode
          instance._masonryHorizontalPlaceBrick( $this, props.rowXs );
        } else {
          // brick spans more than one row
          // how many different places could this brick fit horizontally
          var groupCount = props.rows + 1 - rowSpan,
              groupX = [],
              groupRowX, i;

          // for each group potential horizontal position
          for ( i=0; i < groupCount; i++ ) {
            // make an array of colY values for that one group
            groupRowX = props.rowXs.slice( i, i+rowSpan );
            // and get the max value of the array
            groupX[i] = Math.max.apply( Math, groupRowX );
          }

          instance._masonryHorizontalPlaceBrick( $this, groupX );
        }
      });
    },

    _masonryHorizontalPlaceBrick : function( $brick, setX ) {
      // get the minimum Y value from the columns
      var minimumX  = Math.min.apply( Math, setX ),
          smallRow  = 0;
      // Find index of smallest row, the first from the top
      for (var i=0, len = setX.length; i < len; i++) {
        if ( setX[i] === minimumX ) {
          smallRow = i;
          break;
        }
      }

      // position the brick
      var x = minimumX,
          y = this.masonryHorizontal.rowHeight * smallRow;
      this._pushPosition( $brick, x, y );

      // apply setHeight to necessary columns
      var setWidth = minimumX + $brick.outerWidth(true),
          setSpan = this.masonryHorizontal.rows + 1 - len;
      for ( i=0; i < setSpan; i++ ) {
        this.masonryHorizontal.rowXs[ smallRow + i ] = setWidth;
      }
    },

    _masonryHorizontalGetContainerSize : function() {
      var containerWidth = Math.max.apply( Math, this.masonryHorizontal.rowXs );
      return { width: containerWidth };
    },

    _masonryHorizontalResizeChanged : function() {
      return this._checkIfSegmentsChanged(true);
    },


    // ====================== fitColumns ======================

    _fitColumnsReset : function() {
      this.fitColumns = {
        x : 0,
        y : 0,
        width : 0
      };
    },

    _fitColumnsLayout : function( $elems ) {
      var instance = this,
          containerHeight = this.element.height(),
          props = this.fitColumns;
      $elems.each( function() {
        var $this = $(this),
            atomW = $this.outerWidth(true),
            atomH = $this.outerHeight(true);

        if ( props.y !== 0 && atomH + props.y > containerHeight ) {
          // if this element cannot fit in the current column
          props.x = props.width;
          props.y = 0;
        }

        // position the atom
        instance._pushPosition( $this, props.x, props.y );

        props.width = Math.max( props.x + atomW, props.width );
        props.y += atomH;

      });
    },

    _fitColumnsGetContainerSize : function () {
      return { width : this.fitColumns.width };
    },

    _fitColumnsResizeChanged : function() {
      return true;
    },



    // ====================== cellsByColumn ======================

    _cellsByColumnReset : function() {
      this.cellsByColumn = {
        index : 0
      };
      // get this.cellsByColumn.columnWidth
      this._getSegments();
      // get this.cellsByColumn.rowHeight
      this._getSegments(true);
    },

    _cellsByColumnLayout : function( $elems ) {
      var instance = this,
          props = this.cellsByColumn;
      $elems.each( function(){
        var $this = $(this),
            col = Math.floor( props.index / props.rows ),
            row = props.index % props.rows,
            x = ( col + 0.5 ) * props.columnWidth - $this.outerWidth(true) / 2,
            y = ( row + 0.5 ) * props.rowHeight - $this.outerHeight(true) / 2;
        instance._pushPosition( $this, x, y );
        props.index ++;
      });
    },

    _cellsByColumnGetContainerSize : function() {
      return { width : Math.ceil( this.$filteredAtoms.length / this.cellsByColumn.rows ) * this.cellsByColumn.columnWidth };
    },

    _cellsByColumnResizeChanged : function() {
      return this._checkIfSegmentsChanged(true);
    },

    // ====================== straightAcross ======================

    _straightAcrossReset : function() {
      this.straightAcross = {
        x : 0
      };
    },

    _straightAcrossLayout : function( $elems ) {
      var instance = this;
      $elems.each( function( i ){
        var $this = $(this);
        instance._pushPosition( $this, instance.straightAcross.x, 0 );
        instance.straightAcross.x += $this.outerWidth(true);
      });
    },

    _straightAcrossGetContainerSize : function() {
      return { width : this.straightAcross.x };
    },

    _straightAcrossResizeChanged : function() {
      return true;
    }

  };


  // ======================= imagesLoaded Plugin ===============================
  /*!
   * jQuery imagesLoaded plugin v1.1.0
   * http://github.com/desandro/imagesloaded
   *
   * MIT License. by Paul Irish et al.
   */


  // $('#my-container').imagesLoaded(myFunction)
  // or
  // $('img').imagesLoaded(myFunction)

  // execute a callback when all images have loaded.
  // needed because .load() doesn't work on cached images

  // callback function gets image collection as argument
  //  `this` is the container

  $.fn.imagesLoaded = function( callback ) {
    var $this = this,
        $images = $this.find('img').add( $this.filter('img') ),
        len = $images.length,
        blank = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==',
        loaded = [];

    function triggerCallback() {
      callback.call( $this, $images );
    }

    function imgLoaded( event ) {
      var img = event.target;
      if ( img.src !== blank && $.inArray( img, loaded ) === -1 ){
        loaded.push( img );
        if ( --len <= 0 ){
          setTimeout( triggerCallback );
          $images.unbind( '.imagesLoaded', imgLoaded );
        }
      }
    }

    // if no images, trigger immediately
    if ( !len ) {
      triggerCallback();
    }

    $images.bind( 'load.imagesLoaded error.imagesLoaded',  imgLoaded ).each( function() {
      // cached images don't fire load sometimes, so we reset src.
      var src = this.src;
      // webkit hack from http://groups.google.com/group/jquery-dev/browse_thread/thread/eee6ab7b2da50e1f
      // data uri bypasses webkit log warning (thx doug jones)
      this.src = blank;
      this.src = src;
    });

    return $this;
  };


  // helper function for logging errors
  // $.error breaks jQuery chaining
  var logError = function( message ) {
    if ( window.console ) {
      window.console.error( message );
    }
  };

  // =======================  Plugin bridge  ===============================
  // leverages data method to either create or return $.Isotope constructor
  // A bit from jQuery UI
  //   https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.widget.js
  // A bit from jcarousel
  //   https://github.com/jsor/jcarousel/blob/master/lib/jquery.jcarousel.js

  $.fn.isotope = function( options, callback ) {
    if ( typeof options === 'string' ) {
      // call method
      var args = Array.prototype.slice.call( arguments, 1 );

      this.each(function(){
        var instance = $.data( this, 'isotope' );
        if ( !instance ) {
          logError( "cannot call methods on isotope prior to initialization; " +
              "attempted to call method '" + options + "'" );
          return;
        }
        if ( !$.isFunction( instance[options] ) || options.charAt(0) === "_" ) {
          logError( "no such method '" + options + "' for isotope instance" );
          return;
        }
        // apply method
        instance[ options ].apply( instance, args );
      });
    } else {
      this.each(function() {
        var instance = $.data( this, 'isotope' );
        if ( instance ) {
          // apply options & init
          instance.option( options );
          instance._init( callback );
        } else {
          // initialize new instance
          $.data( this, 'isotope', new $.Isotope( options, this, callback ) );
        }
      });
    }
    // return jQuery object
    // so plugin methods do not have to
    return this;
  };

})( window, jQuery );
;(function($){$.prettyPhoto={version:'3.1.6'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({hook:'rel',animation_speed:'fast',ajaxcallback:function(){},slideshow:5000,autoplay_slideshow:false,opacity:0.80,show_title:true,allow_resize:true,allow_expand:true,default_width:500,default_height:344,counter_separator_label:'/',theme:'pp_default',horizontal_padding:20,hideflash:false,wmode:'opaque',autoplay:true,modal:false,deeplinking:true,overlay_gallery:true,overlay_gallery_max:30,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> \
      <div class="ppt">&nbsp;</div> \
      <div class="pp_top"> \
       <div class="pp_left"></div> \
       <div class="pp_middle"></div> \
       <div class="pp_right"></div> \
      </div> \
      <div class="pp_content_container"> \
       <div class="pp_left"> \
       <div class="pp_right"> \
        <div class="pp_content"> \
         <div class="pp_loaderIcon"></div> \
         <div class="pp_fade"> \
          <a href="#" class="pp_expand" title="Expand the image">Expand</a> \
          <div class="pp_hoverContainer"> \
           <a class="pp_next" href="#">next</a> \
           <a class="pp_previous" href="#">previous</a> \
          </div> \
          <div id="pp_full_res"></div> \
          <div class="pp_details"> \
           <div class="pp_nav"> \
            <a href="#" class="pp_arrow_previous">Previous</a> \
            <p class="currentTextHolder">0/0</p> \
            <a href="#" class="pp_arrow_next">Next</a> \
           </div> \
           <p class="pp_description"></p> \
           <div class="pp_social">{pp_social}</div> \
           <a class="pp_close" href="#">Close</a> \
          </div> \
         </div> \
        </div> \
       </div> \
       </div> \
      </div> \
      <div class="pp_bottom"> \
       <div class="pp_left"></div> \
       <div class="pp_middle"></div> \
       <div class="pp_right"></div> \
      </div> \
     </div> \
     <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \
        <a href="#" class="pp_arrow_previous">Previous</a> \
        <div> \
         <ul> \
          {gallery} \
         </ul> \
        </div> \
        <a href="#" class="pp_arrow_next">Next</a> \
       </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:'',social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},pp_settings);var matchedObjects=this,percentBased=false,pp_dimensions,pp_open,pp_contentHeight,pp_contentWidth,pp_containerHeight,pp_containerWidth,windowHeight=$(window).height(),windowWidth=$(window).width(),pp_slideshow;doresize=true,scroll_pos=_get_scroll();$(window).unbind('resize.prettyphoto').bind('resize.prettyphoto',function(){_center_overlay();_resize_overlay();});if(pp_settings.keyboard_shortcuts){$(document).unbind('keydown.prettyphoto').bind('keydown.prettyphoto',function(e){if(typeof $pp_pic_holder!='undefined'){if($pp_pic_holder.is(':visible')){switch(e.keyCode){case 37:$.prettyPhoto.changePage('previous');e.preventDefault();break;case 39:$.prettyPhoto.changePage('next');e.preventDefault();break;case 27:if(!settings.modal)
$.prettyPhoto.close();e.preventDefault();break;};};};});};$.prettyPhoto.initialize=function(){settings=pp_settings;if(settings.theme=='pp_default')settings.horizontal_padding=16;theRel=$(this).attr(settings.hook);galleryRegExp=/\[(?:.*)\]/;isSet=(galleryRegExp.exec(theRel))?true:false;pp_images=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return $(n).attr('href');}):$.makeArray($(this).attr('href'));pp_titles=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return($(n).find('img').attr('alt'))?$(n).find('img').attr('alt'):"";}):$.makeArray($(this).find('img').attr('alt'));pp_descriptions=(isSet)?jQuery.map(matchedObjects,function(n,i){if($(n).attr(settings.hook).indexOf(theRel)!=-1)return($(n).attr('title'))?$(n).attr('title'):"";}):$.makeArray($(this).attr('title'));if(pp_images.length>settings.overlay_gallery_max)settings.overlay_gallery=false;set_position=jQuery.inArray($(this).attr('href'),pp_images);rel_index=(isSet)?set_position:$("a["+settings.hook+"^='"+theRel+"']").index($(this));_build_overlay(this);if(settings.allow_resize)
$(window).bind('scroll.prettyphoto',function(){_center_overlay();});$.prettyPhoto.open();return false;}
$.prettyPhoto.open=function(event){if(typeof settings=="undefined"){settings=pp_settings;pp_images=$.makeArray(arguments[0]);pp_titles=(arguments[1])?$.makeArray(arguments[1]):$.makeArray("");pp_descriptions=(arguments[2])?$.makeArray(arguments[2]):$.makeArray("");isSet=(pp_images.length>1)?true:false;set_position=(arguments[3])?arguments[3]:0;_build_overlay(event.target);}
if(settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','hidden');_checkPosition($(pp_images).size());$('.pp_loaderIcon').show();if(settings.deeplinking)
setHashtag();if(settings.social_tools){facebook_like_link=settings.social_tools.replace('{location_href}',encodeURIComponent(location.href));$pp_pic_holder.find('.pp_social').html(facebook_like_link);}
if($ppt.is(':hidden'))$ppt.css('opacity',0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);$pp_pic_holder.find('.currentTextHolder').text((set_position+1)+settings.counter_separator_label+$(pp_images).size());if(typeof pp_descriptions[set_position]!='undefined'&&pp_descriptions[set_position]!=""){$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));}else{$pp_pic_holder.find('.pp_description').hide();}
movie_width=(parseFloat(getParam('width',pp_images[set_position])))?getParam('width',pp_images[set_position]):settings.default_width.toString();movie_height=(parseFloat(getParam('height',pp_images[set_position])))?getParam('height',pp_images[set_position]):settings.default_height.toString();percentBased=false;if(movie_height.indexOf('%')!=-1){movie_height=parseFloat(($(window).height()*parseFloat(movie_height)/100)-150);percentBased=true;}
if(movie_width.indexOf('%')!=-1){movie_width=parseFloat(($(window).width()*parseFloat(movie_width)/100)-150);percentBased=true;}
$pp_pic_holder.fadeIn(function(){(settings.show_title&&pp_titles[set_position]!=""&&typeof pp_titles[set_position]!="undefined")?$ppt.html(unescape(pp_titles[set_position])):$ppt.html('&nbsp;');imgPreloader="";skipInjection=false;switch(_getFileType(pp_images[set_position])){case'image':imgPreloader=new Image();nextImage=new Image();if(isSet&&set_position<$(pp_images).size()-1)nextImage.src=pp_images[set_position+1];prevImage=new Image();if(isSet&&pp_images[set_position-1])prevImage.src=pp_images[set_position-1];$pp_pic_holder.find('#pp_full_res')[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]);imgPreloader.onload=function(){pp_dimensions=_fitToViewport(imgPreloader.width,imgPreloader.height);_showContent();};imgPreloader.onerror=function(){alert('Image cannot be loaded. Make sure the path is correct and image exist.');$.prettyPhoto.close();};imgPreloader.src=pp_images[set_position];break;case'youtube':pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=getParam('v',pp_images[set_position]);if(movie_id==""){movie_id=pp_images[set_position].split('youtu.be/');movie_id=movie_id[1];if(movie_id.indexOf('?')>0)
movie_id=movie_id.substr(0,movie_id.indexOf('?'));if(movie_id.indexOf('&')>0)
movie_id=movie_id.substr(0,movie_id.indexOf('&'));}
movie='http://www.youtube.com/embed/'+movie_id;(getParam('rel',pp_images[set_position]))?movie+="?rel="+getParam('rel',pp_images[set_position]):movie+="?rel=1";if(settings.autoplay)movie+="&autoplay=1";toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case'vimeo':pp_dimensions=_fitToViewport(movie_width,movie_height);movie_id=pp_images[set_position];var regExp=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/;var match=movie_id.match(regExp);movie='http://player.vimeo.com/video/'+match[3]+'?title=0&amp;byline=0&amp;portrait=0';if(settings.autoplay)movie+="&autoplay=1;";vimeo_width=pp_dimensions['width']+'/embed/?moog_width='+pp_dimensions['width'];toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,movie);break;case'quicktime':pp_dimensions=_fitToViewport(movie_width,movie_height);pp_dimensions['height']+=15;pp_dimensions['contentHeight']+=15;pp_dimensions['containerHeight']+=15;toInject=settings.quicktime_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case'flash':pp_dimensions=_fitToViewport(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf('flashvars')+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf('?'));toInject=settings.flash_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+'?'+flash_vars);break;case'iframe':pp_dimensions=_fitToViewport(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf('iframe')-1);toInject=settings.iframe_markup.replace(/{width}/g,pp_dimensions['width']).replace(/{height}/g,pp_dimensions['height']).replace(/{path}/g,frame_url);break;case'ajax':doresize=false;pp_dimensions=_fitToViewport(movie_width,movie_height);doresize=true;skipInjection=true;$.get(pp_images[set_position],function(responseHTML){toInject=settings.inline_markup.replace(/{content}/g,responseHTML);$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();});break;case'custom':pp_dimensions=_fitToViewport(movie_width,movie_height);toInject=settings.custom_markup;break;case'inline':myClone=$(pp_images[set_position]).clone().append('<br clear="all" />').css({'width':settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($('body')).show();doresize=false;pp_dimensions=_fitToViewport($(myClone).width(),$(myClone).height());doresize=true;$(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,$(pp_images[set_position]).html());break;};if(!imgPreloader&&!skipInjection){$pp_pic_holder.find('#pp_full_res')[0].innerHTML=toInject;_showContent();};});return false;};$.prettyPhoto.changePage=function(direction){currentGalleryPage=0;if(direction=='previous'){set_position--;if(set_position<0)set_position=$(pp_images).size()-1;}else if(direction=='next'){set_position++;if(set_position>$(pp_images).size()-1)set_position=0;}else{set_position=direction;};rel_index=set_position;if(!doresize)doresize=true;if(settings.allow_expand){$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');}
_hideContent(function(){$.prettyPhoto.open();});};$.prettyPhoto.changeGalleryPage=function(direction){if(direction=='next'){currentGalleryPage++;if(currentGalleryPage>totalPage)currentGalleryPage=0;}else if(direction=='previous'){currentGalleryPage--;if(currentGalleryPage<0)currentGalleryPage=totalPage;}else{currentGalleryPage=direction;};slide_speed=(direction=='next'||direction=='previous')?settings.animation_speed:0;slide_to=currentGalleryPage*(itemsPerPage*itemWidth);$pp_gallery.find('ul').animate({left:-slide_to},slide_speed);};$.prettyPhoto.startSlideshow=function(){if(typeof pp_slideshow=='undefined'){$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function(){$.prettyPhoto.stopSlideshow();return false;});pp_slideshow=setInterval($.prettyPhoto.startSlideshow,settings.slideshow);}else{$.prettyPhoto.changePage('next');};}
$.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});clearInterval(pp_slideshow);pp_slideshow=undefined;}
$.prettyPhoto.close=function(){if($pp_overlay.is(":animated"))return;$.prettyPhoto.stopSlideshow();$pp_pic_holder.stop().find('object,embed').css('visibility','hidden');$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed,function(){$(this).remove();});$pp_overlay.fadeOut(settings.animation_speed,function(){if(settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility','visible');$(this).remove();$(window).unbind('scroll.prettyphoto');clearHashtag();settings.callback();doresize=true;pp_open=false;delete settings;});};function _showContent(){$('.pp_loaderIcon').hide();projectedTop=scroll_pos['scrollTop']+((windowHeight/2)-(pp_dimensions['containerHeight']/2));if(projectedTop<0)projectedTop=0;$ppt.fadeTo(settings.animation_speed,1);$pp_pic_holder.find('.pp_content').animate({height:pp_dimensions['contentHeight'],width:pp_dimensions['contentWidth']},settings.animation_speed);$pp_pic_holder.animate({'top':projectedTop,'left':((windowWidth/2)-(pp_dimensions['containerWidth']/2)<0)?0:(windowWidth/2)-(pp_dimensions['containerWidth']/2),width:pp_dimensions['containerWidth']},settings.animation_speed,function(){$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(pp_dimensions['height']).width(pp_dimensions['width']);$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed);if(isSet&&_getFileType(pp_images[set_position])=="image"){$pp_pic_holder.find('.pp_hoverContainer').show();}else{$pp_pic_holder.find('.pp_hoverContainer').hide();}
if(settings.allow_expand){if(pp_dimensions['resized']){$('a.pp_expand,a.pp_contract').show();}else{$('a.pp_expand').hide();}}
if(settings.autoplay_slideshow&&!pp_slideshow&&!pp_open)$.prettyPhoto.startSlideshow();settings.changepicturecallback();pp_open=true;});_insert_gallery();pp_settings.ajaxcallback();};function _hideContent(callback){$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility','hidden');$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed,function(){$('.pp_loaderIcon').show();callback();});};function _checkPosition(setCount){(setCount>1)?$('.pp_nav').show():$('.pp_nav').hide();};function _fitToViewport(width,height){resized=false;_getDimensions(width,height);imageWidth=width,imageHeight=height;if(((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight))&&doresize&&settings.allow_resize&&!percentBased){resized=true,fitting=false;while(!fitting){if((pp_containerWidth>windowWidth)){imageWidth=(windowWidth-200);imageHeight=(height/width)*imageWidth;}else if((pp_containerHeight>windowHeight)){imageHeight=(windowHeight-200);imageWidth=(width/height)*imageHeight;}else{fitting=true;};pp_containerHeight=imageHeight,pp_containerWidth=imageWidth;};if((pp_containerWidth>windowWidth)||(pp_containerHeight>windowHeight)){_fitToViewport(pp_containerWidth,pp_containerHeight)};_getDimensions(imageWidth,imageHeight);};return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(pp_containerHeight),containerWidth:Math.floor(pp_containerWidth)+(settings.horizontal_padding*2),contentHeight:Math.floor(pp_contentHeight),contentWidth:Math.floor(pp_contentWidth),resized:resized};};function _getDimensions(width,height){width=parseFloat(width);height=parseFloat(height);$pp_details=$pp_pic_holder.find('.pp_details');$pp_details.width(width);detailsHeight=parseFloat($pp_details.css('marginTop'))+parseFloat($pp_details.css('marginBottom'));$pp_details=$pp_details.clone().addClass(settings.theme).width(width).appendTo($('body')).css({'position':'absolute','top':-10000});detailsHeight+=$pp_details.height();detailsHeight=(detailsHeight<=34)?36:detailsHeight;$pp_details.remove();$pp_title=$pp_pic_holder.find('.ppt');$pp_title.width(width);titleHeight=parseFloat($pp_title.css('marginTop'))+parseFloat($pp_title.css('marginBottom'));$pp_title=$pp_title.clone().appendTo($('body')).css({'position':'absolute','top':-10000});titleHeight+=$pp_title.height();$pp_title.remove();pp_contentHeight=height+detailsHeight;pp_contentWidth=width;pp_containerHeight=pp_contentHeight+titleHeight+$pp_pic_holder.find('.pp_top').height()+$pp_pic_holder.find('.pp_bottom').height();pp_containerWidth=width;}
function _getFileType(itemSrc){if(itemSrc.match(/youtube\.com\/watch/i)||itemSrc.match(/youtu\.be/i)){return'youtube';}else if(itemSrc.match(/vimeo\.com/i)){return'vimeo';}else if(itemSrc.match(/\b.mov\b/i)){return'quicktime';}else if(itemSrc.match(/\b.swf\b/i)){return'flash';}else if(itemSrc.match(/\biframe=true\b/i)){return'iframe';}else if(itemSrc.match(/\bajax=true\b/i)){return'ajax';}else if(itemSrc.match(/\bcustom=true\b/i)){return'custom';}else if(itemSrc.substr(0,1)=='#'){return'inline';}else{return'image';};};function _center_overlay(){if(doresize&&typeof $pp_pic_holder!='undefined'){scroll_pos=_get_scroll();contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width();projectedTop=(windowHeight/2)+scroll_pos['scrollTop']-(contentHeight/2);if(projectedTop<0)projectedTop=0;if(contentHeight>windowHeight)
return;$pp_pic_holder.css({'top':projectedTop,'left':(windowWidth/2)+scroll_pos['scrollLeft']-(contentwidth/2)});};};function _get_scroll(){if(self.pageYOffset){return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};}else if(document.documentElement&&document.documentElement.scrollTop){return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};}else if(document.body){return{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft};};};function _resize_overlay(){windowHeight=$(window).height(),windowWidth=$(window).width();if(typeof $pp_overlay!="undefined")$pp_overlay.height($(document).height()).width(windowWidth);};function _insert_gallery(){if(isSet&&settings.overlay_gallery&&_getFileType(pp_images[set_position])=="image"){itemWidth=52+5;navWidth=(settings.theme=="facebook"||settings.theme=="pp_default")?50:30;itemsPerPage=Math.floor((pp_dimensions['containerWidth']-100-navWidth)/itemWidth);itemsPerPage=(itemsPerPage<pp_images.length)?itemsPerPage:pp_images.length;totalPage=Math.ceil(pp_images.length/itemsPerPage)-1;if(totalPage==0){navWidth=0;$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').hide();}else{$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').show();};galleryWidth=itemsPerPage*itemWidth;fullGalleryWidth=pp_images.length*itemWidth;$pp_gallery.css('margin-left',-((galleryWidth/2)+(navWidth/2))).find('div:first').width(galleryWidth+5).find('ul').width(fullGalleryWidth).find('li.selected').removeClass('selected');goToPage=(Math.floor(set_position/itemsPerPage)<totalPage)?Math.floor(set_position/itemsPerPage):totalPage;$.prettyPhoto.changeGalleryPage(goToPage);$pp_gallery_li.filter(':eq('+set_position+')').addClass('selected');}else{$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');}}
function _build_overlay(caller){if(settings.social_tools)
facebook_like_link=settings.social_tools.replace('{location_href}',encodeURIComponent(location.href));settings.markup=settings.markup.replace('{pp_social}','');$('body').append(settings.markup);$pp_pic_holder=$('.pp_pic_holder'),$ppt=$('.ppt'),$pp_overlay=$('div.pp_overlay');if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(var i=0;i<pp_images.length;i++){if(!pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)){classname='default';img_src='';}else{classname='';img_src=pp_images[i];}
toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";};toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find('#pp_full_res').after(toInject);$pp_gallery=$('.pp_pic_holder .pp_gallery'),$pp_gallery_li=$pp_gallery.find('li');$pp_gallery.find('.pp_arrow_next').click(function(){$.prettyPhoto.changeGalleryPage('next');$.prettyPhoto.stopSlideshow();return false;});$pp_gallery.find('.pp_arrow_previous').click(function(){$.prettyPhoto.changeGalleryPage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_content').hover(function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();},function(){$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();});itemWidth=52+5;$pp_gallery_li.each(function(i){$(this).find('a').click(function(){$.prettyPhoto.changePage(i);$.prettyPhoto.stopSlideshow();return false;});});};if(settings.slideshow){$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>')
$pp_pic_holder.find('.pp_nav .pp_play').click(function(){$.prettyPhoto.startSlideshow();return false;});}
$pp_pic_holder.attr('class','pp_pic_holder '+settings.theme);$pp_overlay.css({'opacity':0,'height':$(document).height(),'width':$(window).width()}).bind('click',function(){if(!settings.modal)$.prettyPhoto.close();});$('a.pp_close').bind('click',function(){$.prettyPhoto.close();return false;});if(settings.allow_expand){$('a.pp_expand').bind('click',function(e){if($(this).hasClass('pp_expand')){$(this).removeClass('pp_expand').addClass('pp_contract');doresize=false;}else{$(this).removeClass('pp_contract').addClass('pp_expand');doresize=true;};_hideContent(function(){$.prettyPhoto.open();});return false;});}
$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click',function(){$.prettyPhoto.changePage('previous');$.prettyPhoto.stopSlideshow();return false;});$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click',function(){$.prettyPhoto.changePage('next');$.prettyPhoto.stopSlideshow();return false;});_center_overlay();};if(!pp_alreadyInitialized&&getHashtag()){pp_alreadyInitialized=true;hashIndex=getHashtag();hashRel=hashIndex;hashIndex=hashIndex.substring(hashIndex.indexOf('/')+1,hashIndex.length-1);hashRel=hashRel.substring(0,hashRel.indexOf('/'));setTimeout(function(){$("a["+pp_settings.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger('click');},50);}
return this.unbind('click.prettyphoto').bind('click.prettyphoto',$.prettyPhoto.initialize);};function getHashtag(){var url=location.href;hashtag=(url.indexOf('#prettyPhoto')!==-1)?decodeURI(url.substring(url.indexOf('#prettyPhoto')+1,url.length)):false;if(hashtag){hashtag=hashtag.replace(/<|>/g,'');}
return hashtag;};function setHashtag(){if(typeof theRel=='undefined')return;location.hash=theRel+'/'+rel_index+'/';};function clearHashtag(){if(location.href.indexOf('#prettyPhoto')!==-1)location.hash="prettyPhoto";}
function getParam(name,url){name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return(results==null)?"":results[1];}})(jQuery);var pp_alreadyInitialized=false;
;/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
(function(k){k.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var d=document.createElement("div");var q={};function b(v){if(v in d.style){return v}var u=["Moz","Webkit","O","ms"];var r=v.charAt(0).toUpperCase()+v.substr(1);if(v in d.style){return v}for(var t=0;t<u.length;++t){var s=u[t]+r;if(s in d.style){return s}}}function e(){d.style[q.transform]="";d.style[q.transform]="rotateY(90deg)";return d.style[q.transform]!==""}var a=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;q.transition=b("transition");q.transitionDelay=b("transitionDelay");q.transform=b("transform");q.transformOrigin=b("transformOrigin");q.transform3d=e();var i={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var f=q.transitionEnd=i[q.transition]||null;for(var p in q){if(q.hasOwnProperty(p)&&typeof k.support[p]==="undefined"){k.support[p]=q[p]}}d=null;k.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};k.cssHooks["transit:transform"]={get:function(r){return k(r).data("transform")||new j()},set:function(s,r){var t=r;if(!(t instanceof j)){t=new j(t)}if(q.transform==="WebkitTransform"&&!a){s.style[q.transform]=t.toString(true)}else{s.style[q.transform]=t.toString()}k(s).data("transform",t)}};k.cssHooks.transform={set:k.cssHooks["transit:transform"].set};if(k.fn.jquery<"1.8"){k.cssHooks.transformOrigin={get:function(r){return r.style[q.transformOrigin]},set:function(r,s){r.style[q.transformOrigin]=s}};k.cssHooks.transition={get:function(r){return r.style[q.transition]},set:function(r,s){r.style[q.transition]=s}}}n("scale");n("translate");n("rotate");n("rotateX");n("rotateY");n("rotate3d");n("perspective");n("skewX");n("skewY");n("x",true);n("y",true);function j(r){if(typeof r==="string"){this.parse(r)}return this}j.prototype={setFromString:function(t,s){var r=(typeof s==="string")?s.split(","):(s.constructor===Array)?s:[s];r.unshift(t);j.prototype.set.apply(this,r)},set:function(s){var r=Array.prototype.slice.apply(arguments,[1]);if(this.setter[s]){this.setter[s].apply(this,r)}else{this[s]=r.join(",")}},get:function(r){if(this.getter[r]){return this.getter[r].apply(this)}else{return this[r]||0}},setter:{rotate:function(r){this.rotate=o(r,"deg")},rotateX:function(r){this.rotateX=o(r,"deg")},rotateY:function(r){this.rotateY=o(r,"deg")},scale:function(r,s){if(s===undefined){s=r}this.scale=r+","+s},skewX:function(r){this.skewX=o(r,"deg")},skewY:function(r){this.skewY=o(r,"deg")},perspective:function(r){this.perspective=o(r,"px")},x:function(r){this.set("translate",r,null)},y:function(r){this.set("translate",null,r)},translate:function(r,s){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(r!==null&&r!==undefined){this._translateX=o(r,"px")}if(s!==null&&s!==undefined){this._translateY=o(s,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var r=(this.scale||"1,1").split(",");if(r[0]){r[0]=parseFloat(r[0])}if(r[1]){r[1]=parseFloat(r[1])}return(r[0]===r[1])?r[0]:r},rotate3d:function(){var t=(this.rotate3d||"0,0,0,0deg").split(",");for(var r=0;r<=3;++r){if(t[r]){t[r]=parseFloat(t[r])}}if(t[3]){t[3]=o(t[3],"deg")}return t}},parse:function(s){var r=this;s.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,v,u){r.setFromString(v,u)})},toString:function(t){var s=[];for(var r in this){if(this.hasOwnProperty(r)){if((!q.transform3d)&&((r==="rotateX")||(r==="rotateY")||(r==="perspective")||(r==="transformOrigin"))){continue}if(r[0]!=="_"){if(t&&(r==="scale")){s.push(r+"3d("+this[r]+",1)")}else{if(t&&(r==="translate")){s.push(r+"3d("+this[r]+",0)")}else{s.push(r+"("+this[r]+")")}}}}}return s.join(" ")}};function m(s,r,t){if(r===true){s.queue(t)}else{if(r){s.queue(r,t)}else{t()}}}function h(s){var r=[];k.each(s,function(t){t=k.camelCase(t);t=k.transit.propertyMap[t]||k.cssProps[t]||t;t=c(t);if(k.inArray(t,r)===-1){r.push(t)}});return r}function g(s,v,x,r){var t=h(s);if(k.cssEase[x]){x=k.cssEase[x]}var w=""+l(v)+" "+x;if(parseInt(r,10)>0){w+=" "+l(r)}var u=[];k.each(t,function(z,y){u.push(y+" "+w)});return u.join(", ")}k.fn.transition=k.fn.transit=function(z,s,y,C){var D=this;var u=0;var w=true;if(typeof s==="function"){C=s;s=undefined}if(typeof y==="function"){C=y;y=undefined}if(typeof z.easing!=="undefined"){y=z.easing;delete z.easing}if(typeof z.duration!=="undefined"){s=z.duration;delete z.duration}if(typeof z.complete!=="undefined"){C=z.complete;delete z.complete}if(typeof z.queue!=="undefined"){w=z.queue;delete z.queue}if(typeof z.delay!=="undefined"){u=z.delay;delete z.delay}if(typeof s==="undefined"){s=k.fx.speeds._default}if(typeof y==="undefined"){y=k.cssEase._default}s=l(s);var E=g(z,s,y,u);var B=k.transit.enabled&&q.transition;var t=B?(parseInt(s,10)+parseInt(u,10)):0;if(t===0){var A=function(F){D.css(z);if(C){C.apply(D)}if(F){F()}};m(D,w,A);return D}var x={};var r=function(H){var G=false;var F=function(){if(G){D.unbind(f,F)}if(t>0){D.each(function(){this.style[q.transition]=(x[this]||null)})}if(typeof C==="function"){C.apply(D)}if(typeof H==="function"){H()}};if((t>0)&&(f)&&(k.transit.useTransitionEnd)){G=true;D.bind(f,F)}else{window.setTimeout(F,t)}D.each(function(){if(t>0){this.style[q.transition]=E}k(this).css(z)})};var v=function(F){this.offsetWidth;r(F)};m(D,w,v);return this};function n(s,r){if(!r){k.cssNumber[s]=true}k.transit.propertyMap[s]=q.transform;k.cssHooks[s]={get:function(v){var u=k(v).css("transit:transform");return u.get(s)},set:function(v,w){var u=k(v).css("transit:transform");u.setFromString(s,w);k(v).css({"transit:transform":u})}}}function c(r){return r.replace(/([A-Z])/g,function(s){return"-"+s.toLowerCase()})}function o(s,r){if((typeof s==="string")&&(!s.match(/^[\-0-9\.]+$/))){return s}else{return""+s+r}}function l(s){var r=s;if(k.fx.speeds[r]){r=k.fx.speeds[r]}return o(r,"ms")}k.transit.getTransitionValue=g})(jQuery);
;var SELENE_GLOBALS={};var pluginName='Selene',VERSION=0.1,defaults={width:600,height:450,duration:8000,caption:true,autoplay:true,arrow_control:true,thumbnails:true,compact:false};function Selene(element,options){this.options=jQuery.extend(defaults,options);this._defaults=defaults;this._name="Selene";this.rawEl=element;this.element=jQuery(element);this.holder=this.element.children('div.gallery-holder');this.timer=null;this.len=0;this.offset=0;this.current=null;this.prev=null;this.next=null;this.thumb_wrap=null;this.thumb_holder=null;this.isTranslatable=true;this.circularTimer=null;this.thumbnails=null;this.bullets=null;this.counter=null;this.slides=null;this.flag=false;this.autoplay_flag=false;this.responsivePercent=100;this.isresponsive=false;this.r={};this.videos=[];var wait,index,src,in_animation=false,controls,len,controls_override=false,i,j,k,temp,obj=this,slides=null,layers=null,mainImages=null;this.htmldatamap=function()
{var temp=this.element.data();this.options=temp;this.options.duration=parseFloat(this.options.duration)*1000;}
this.setup=function(){if(!jQuery.support.transition)this.isTranslatable=false
if(this.options.domMapping===true)this.htmldatamap();this.element.addClass('seleneGallery');if(typeof this.options.fullscreen!='undefined'&&this.options.fullscreen)
{obj.options.height=jQuery(window).height()-(jQuery('.header-cons-area').height()-jQuery('#bottom_bar_area').height()-45)-jQuery('.supper-title-wrapper').height();this.options.width=jQuery(window).width();if(jQuery('.ioa-boxed-layout').length>0)this.options.width=jQuery('.skeleton').width();this.element.addClass('fullscreen');}
this.element.width(this.options.width);this.holder.width(this.options.width);this.holder.height(this.options.height);this.r.w=this.options.width;this.r.h=this.options.height;this.element.parent().css('overflow','hidden');this.slides=this.element.find('div.gallery-item').addClass('hidden');this.current=this.slides.first().addClass('active').removeClass('hidden');this.prev=this.slides.last().addClass('reset');this.next=this.slides.eq(1);if(this.options.thumbnails&&this.slides.length>1)this.addThumbnail();if(this.options.arrow_control&&this.slides.length>1)this.addControls();};this.init=function(){this.element.parent().css('background','none');this.holder.hover(function(){if(obj.flag===true)return;clearTimeout(obj.timer);obj.resetProgressBar();},function(){if(obj.flag===true)return;obj.updateSlide();obj.startProgressBar(obj.slides.index(obj.current));});this.startProgressBar(obj.slides.index(this.current));if(obj.options.autoplay===true)
this.timer=setTimeout(function(){obj.effect();},this.options.duration);jQuery(window).resize(function(){clearTimeout(test_resize);obj.responsiveAuto();test_resize=setTimeout(function(){obj.responsiveAuto();if(obj.options.thumbnails===true)
obj.adjustThumbArea();},150);});var test_resize=setTimeout(function(){obj.responsiveAuto();obj.responsiveAuto();if(obj.options.thumbnails===true)
obj.adjustThumbArea();obj.showDesc(obj.current.find('div.gallery-desc'));obj.element.parent().css({'overflow':'visible','background':'none'});obj.element.css({'overflow':'visible'});obj.element.parent().find('.loader').remove();obj.element.css("visibility","visible").animate({opacity:1},'normal');var temp;obj.slides.each(function(i){temp=jQuery(this).find('.quant_video-bg');if(temp.length>0){temp.css({width:obj.options.width,height:obj.options.height});obj.videos[i]={el:new MediaElement(temp.children('video').attr('id'),{loop:true,features:[],videoWidth:obj.options.width,videoHeight:obj.options.height,enableAutosize:true,success:function(mediaElement,domObject){mediaElement.play();}}),id:jQuery(this).find('video').attr('id')};}});},60);};this.resize=function(h,w,maxh,maxw){var ratio=maxh/maxw;if(h/w>ratio){if(h>maxh){w=Math.round(w*(maxh/h));h=maxh;}}else if(h/w<ratio){if(w>maxh){h=Math.round(h*(maxw/w));w=maxw;}
else
{h=Math.round(h*(maxw/w));}}
return[h,w];};this.scale=function(h,w,maxh,maxw){var ratio=maxh/maxw;if(h/w<ratio){if(w>=maxw){h=Math.round(maxh*(w/maxw));w=w;}}
return[h,w];};this.responsiveAuto=function(){var cf=this.options.width,h=this.options.height,w;if(this.options.fullscreen)
{w=this.element.parent().width();h=jQuery(window).height()-(jQuery('.header-cons-area').height()-jQuery('#bottom_bar_area').height()-45)-jQuery('.supper-title-wrapper').height();if(this.current.find('img').height()<h)h=this.current.find('img').height();this.element.css({width:w});this.holder.css({width:w,height:h});}
else if(this.element.parent().width()<=cf){temp=this.resize(this.options.height,cf,h,this.element.parent().width());if(temp[1]>this.element.parent().width())
{temp[1]=this.element.parent().width();}
this.responsivePercent=(temp[1]/cf)*100;this.isresponsive=true;temp[0]=this.current.find('img').height();this.element.css({width:temp[1]});this.holder.css({width:temp[1],height:temp[0]});obj.r.w=temp[1];if(this.options.caption)
{if(this.current.find('div.slider-desc').hasClass('s-c-l')||this.current.hasClass('s-c-c')||this.current.hasClass('s-c-r'))
{this.current.find('div.slider-desc').css('top',temp[0]/2-this.current.find('div.slider-desc').outerHeight()/2+"px");}}}
else
{this.responsivePercent=100;this.isresponsive=false;this.element.css({width:obj.options.width});this.holder.css({width:obj.options.width,height:obj.options.height});obj.r.w=obj.options.width;if(this.options.caption)
{if(this.current.find('div.slider-desc').hasClass('s-c-l')||this.current.hasClass('s-c-c')||this.current.hasClass('s-c-r'))
{this.current.find('div.slider-desc').css('top',temp[0]/2-this.current.find('div.slider-desc').outerHeight()/2+"px");}}}
obj.offset=0;if(this.options.thumbnails)
{this.thumb_holder.width(obj.r.w);obj.thumb_wrap.stop(true,true).css("left",obj.offset+"px");}};this.prepareSlide=function(slide)
{obj.element.trigger('seleneSlideBeforeChange',[obj.slides.index(slide)]);obj.flag=false;if(this.current.find('.quant_video-bg').length>0)
{for(var i=0;i<obj.videos;i++)
{if(obj.videos[i].id==this.current.find('video').attr('id'))
{obj.videos[i].el.pause();}}}
switch(this.options.effect_type)
{case'fade':slide.css({opacity:0});break;case'scroll':slide.css({x:this.r.w+80+'px'});break;case'overlap-left':slide.css({x:this.r.w+'px'});break;case'overlap-right':slide.css({x:-this.r.w+'px'});break;case'overlap-top':slide.css({y:this.r.h+'px'});break;case'overlap-bottom':slide.css({y:-this.r.h+'px'});break;case'scroll-perspective':slide.css({x:this.r.w+'px',opacity:0,perspective:400,rotateY:'-50deg'});break;}
this.prev.removeClass('reset').addClass('hidden');this.prev=this.current.addClass('reset').removeClass('active');this.current=slide.addClass('active');this.current.find('div.gallery-desc').hide();if(this.current.next('div.gallery-item').length>0)
this.next=this.current.next('div.gallery-item');else
this.next=this.slides.first('div.gallery-item');clearTimeout(this.timer);this.animate(slide);}
this.effect=function(){this.prepareSlide(this.next);};this.animate=function(slide)
{this.startProgressBar(obj.slides.index(slide));switch(this.options.effect_type)
{case'fade':slide.removeClass('hidden').transition({opacity:1},700,'',function(){obj.element.trigger('seleneSlideChanged',[obj.slides.index(slide)]);});this.prev.transition({opacity:0},700,'');break;case'overlap-left':case'overlap-right':slide.removeClass('hidden').transition({x:0},700,'',function(){obj.element.trigger('seleneSlideChanged',[obj.slides.index(slide)]);});break;case'overlap-bottom':case'overlap-top':slide.removeClass('hidden').transition({y:0},700,'',function(){obj.element.trigger('seleneSlideChanged',[obj.slides.index(slide)]);});break;case'scroll':this.prev.transition({x:-this.options.width-80},700);slide.removeClass('hidden').transition({x:0},700,'',function(){obj.element.trigger('seleneSlideChanged',[obj.slides.index(slide)]);});break;case'scroll-perspective':this.prev.transition({x:-this.options.width,opacity:0,perspective:400,rotateY:'30deg'},700);slide.removeClass('hidden').transition({x:0,opacity:1,rotateY:'0deg'},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;}
if(obj.options.fullscreen)
{var h=jQuery(window).height()-(jQuery('.header-cons-area').height()-jQuery('#bottom_bar_area').height()-45)-jQuery('.supper-title-wrapper').height();if(slide.find('img').height()<h)h=slide.find('img').height();obj.holder.css({height:h});}
if(this.current.find('.quant_video-bg').length>0)
{for(var i=0;i<obj.videos;i++)
{if(obj.videos[i].id==this.current.find('video').attr('id'))
{obj.videos[i].el.play();}}}
this.updateSlide();}
this.updateSlide=function()
{clearTimeout(this.timer);if(this.flag===false&&this.autoplay_flag===false&&obj.options.autoplay===true)
this.timer=setTimeout(function(){obj.effect();},this.options.duration);}
this.addControls=function()
{var lc='',str='<div class="selene-controls-wrap"> <a href="" class="selene-controls ioa-front-icon angle-lefticon- gallery-prev"></a>';if(this.element.find('.ioa-lightbox-icon').length==0)lc='no-lightbox';if(obj.options.autoplay===true)str+='<a href="" class="selene-controls '+lc+' autoplay-control ioa-front-icon pause-2icon- gallery-pause"></a>';str+='<a href="" class="selene-controls ioa-front-icon angle-righticon- gallery-next"></a> </div>';this.holder.append(str);this.element.on("click",'a.gallery-prev',function(e){e.preventDefault();var index=obj.slides.index(obj.current);if(index==0)index=obj.slides.length-1;else index=index-1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});obj.element.bind('swiperight',function(){var index=obj.slides.index(obj.current);if(index==0)index=obj.slides.length-1;else index=index-1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});obj.element.bind('swipeleft',function(){var index=obj.slides.index(obj.current);if(index==obj.slides.length-1)index=0;else index=index+1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});this.element.on("click",'a.gallery-next',function(e){var index=obj.slides.index(obj.current);e.preventDefault();if(index==obj.slides.length-1)index=0;else index=index+1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});this.element.on("click",'a.gallery-pause',function(e){e.preventDefault();if(jQuery(this).hasClass('pause-2icon-'))
{obj.autoplay_flag=true;obj.flag=true;jQuery(this).addClass('play-2icon-').removeClass('pause-2icon-');clearTimeout(obj.timer);obj.resetProgressBar();}
else
{obj.autoplay_flag=false;obj.flag=false;jQuery(this).addClass('pause-2icon-').removeClass('play-2icon-');obj.updateSlide();obj.startProgressBar(obj.slides.index(obj.current));}});}
this.addThumbnail=function()
{var str='<div class="selene-thumbnails-wrap greyscale-imgs"><ul class="selene-thumbnails hoverable">',thumbs_arrow='';var compact='';this.slides.each(function(){str+="<li style='opacity:0;'><img src='"+jQuery(this).data('thumbnail')+"' alt='thumb' /><span class='gallery-loader'></span></li>";if(obj.options.compact===true)
{compact+="<li><span class='gallery-loader'></span></li>";}});str+="</ul></div>";this.element.append(str);this.thumbnails=this.element.find('ul.selene-thumbnails li');this.thumbnails.first().addClass('active');if(jQuery(window).width()>1024)
setTimeout(function(){obj.thumbnails.each(function(i){jQuery(this).delay(i*170).transition({opacity:1},700);});},200);else
obj.thumbnails.css("opacity",1);this.element.bind('seleneSlideBeforeChange',function(event,index){obj.thumbnails.removeClass('active');obj.thumbnails.eq(index).addClass('active');if(obj.options.compact===true)
{obj.bullets.removeClass('active');obj.bullets.eq(index).addClass('active');}
event.stopImmediatePropagation();event.stopPropagation();});this.thumb_wrap=this.element.find('ul.selene-thumbnails');this.thumb_holder=this.thumb_wrap.parent();this.thumb_holder.width(obj.r.w);var li_w=(this.thumbnails.outerWidth()+2)*this.thumbnails.length;thumbs_arrow="<a href='' class='angle-lefticon- ioa-front-icon thumb-arrow-left' style='display:none'></a><a href='' style='display:none' class='angle-righticon- ioa-front-icon thumb-arrow-right'></a>";this.thumb_holder.append(thumbs_arrow);if(li_w>this.r.w)
{this.thumb_wrap.addClass('push_right');}
obj.thumbnails.on("click",function(){var index=obj.thumbnails.index(jQuery(this));if(jQuery(this).hasClass('active'))return;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});this.element.find('a.thumb-arrow-left').on("click",function(e){e.preventDefault();if(obj.offset>0)
{obj.offset-=(obj.thumbnails.outerWidth()+2)*2;obj.thumb_wrap.animate({left:-obj.offset},'normal');}});this.element.find('a.thumb-arrow-right').on("click",function(e){e.preventDefault();if((obj.offset+obj.r.w)<=li_w)
{obj.offset+=(obj.thumbnails.outerWidth()+2)*2;obj.thumb_wrap.animate({left:-(obj.offset+20)},'normal');}});}
this.adjustThumbArea=function()
{var li_w=(this.thumbnails.outerWidth()+2)*this.thumbnails.length;if(li_w>obj.r.w)
{obj.element.find('a.thumb-arrow-left , a.thumb-arrow-right').show();obj.thumb_wrap.addClass('push_right');}
else
{obj.element.find('a.thumb-arrow-left , a.thumb-arrow-right').hide();obj.thumb_wrap.removeClass('push_right');}}
this.showDesc=function(desc)
{if(this.options.captions)
{if(desc.hasClass('s-c-l')||desc.hasClass('s-c-c')||desc.hasClass('s-c-r'))
{desc.css('top',this.holder.height()/2-desc.outerHeight()/2+"px");}
var h=desc.find('h4').css({opacity:0,marginTop:15});var cap=desc.find('.caption').css({opacity:0,marginTop:15});desc.show();h.transition({opacity:1,marginTop:0},200,'easeOutCubic');cap.transition({opacity:1,marginTop:0},200,'easeOutCubic');}}
this.startProgressBar=function(index)
{if(this.flag===false&&this.autoplay_flag===false&&obj.options.autoplay===true&&obj.options.thumbnails===true){var th=this.thumbnails.eq(index);this.thumbnails.find('span.gallery-loader').stop(true,true).css("width",0);th.find('span.gallery-loader').animate({"width":80},this.options.duration);}}
this.resetProgressBar=function()
{if(obj.options.thumbnails===true)
this.thumbnails.find('span.gallery-loader').stop(true,false).animate({"width":0},'fast');}
this.element.bind('seleneSlideChanged',function(event,index){obj.showDesc(obj.slides.eq(index).find('div.gallery-desc'));event.stopImmediatePropagation();event.stopPropagation();});function ioapreloader(obj,callback)
{var images=[];images=jQuery.makeArray(obj.find('img'));var limit=images.length,timer,i,index;timer=setInterval(function(){if(limit<=0)
{callback();clearInterval(timer);return;}
for(i=0;i<images.length;i++)
{if(images[i].complete||images[i].readyState==4)
{images.splice(i,1);limit--;}}},200);}
obj.setup();ioapreloader(this.element,function(){obj.init();});}
jQuery.fn.seleneGallery=function(options){return this.each(function(){if(!jQuery.data(this,'plugin_'+pluginName)){jQuery.data(this,'plugin_'+pluginName,new Selene(this,options));}});};var QUARTZ_GLOBALS={};var pluginName='Quartz',VERSION=0.1,defaults={width:600,height:450,duration:8000,caption:true,autoplay:true,effect_type:'fade',arrow_control:true,bullets:true};function Quartz(element,options){this.options=jQuery.extend(defaults,options);this._defaults=defaults;this._name="Quartz";this.rawEl=element;this.element=jQuery(element);this.holder=this.element.children('div.items-holder');this.timer=null;this.len=0;this.offset=0;this.current=null;this.prev=null;this.next=null;this.thumb_wrap=null;this.thumb_holder=null;this.progress_bar=null;this.isTranslatable=true;this.bullets=null;this.counter=null;this.slides=null;this.autoplay_flag=false;this.responsivePercent=100;this.isresponsive=false;this.r={};this.videos=[];var wait,index,src,in_animation=false,controls,len,controls_override=false,i,j,k,temp,obj=this,slides=null,layers=null,mainImages=null;this.htmldatamap=function()
{var temp=this.element.data();this.options=temp;this.options.duration=parseFloat(this.options.duration)*1000;}
this.setup=function(){if(!jQuery.support.transition)this.isTranslatable=false
if(this.options.full_width==true)
{this.options.width=this.element.parent().width();this.element.addClass('full-stretch');this.element.find('.inner-desc-wrap').addClass('skeleton auto_align');}
this.element.parent().css('overflow','hidden');this.element.width(this.options.width);this.holder.width(this.options.width);this.r.w=this.options.width;this.r.h=this.options.height;this.slides=this.element.find('div.slider-item').addClass('hidden');this.current=this.slides.first().addClass('active').removeClass('hidden');this.prev=this.slides.last().addClass('reset');this.next=this.slides.eq(1);if(this.options.bullets===true&&this.slides.length>1)this.addBullets();if(this.options.arrow_control===true&&this.slides.length>1)this.addControls();if(this.options.autoplay===true)
{this.holder.append('<span class="progress-bar"></span>');this.progress_bar=this.holder.find('.progress-bar');}};this.init=function(){this.startProgressBar();if(obj.options.autoplay===true)
this.timer=setTimeout(function(){obj.effect();},this.options.duration);if(this.options.adaptive)
{obj.element.addClass('adaptive');}
jQuery(window).resize(function(){clearTimeout(test_resize);obj.responsiveAuto();test_resize=setTimeout(function(){obj.responsiveAuto();},100);});var test_resize=setTimeout(function(){obj.responsiveAuto();obj.element.parent().css({'overflow':'visible','background':'none'});obj.element.css("visibility","visible").animate({opacity:1},'normal');var temp;obj.slides.each(function(i){temp=jQuery(this).find('.quant_video-bg');if(temp.length>0){temp.css({width:obj.options.width,height:obj.options.height});obj.videos[i]={el:new MediaElement(temp.children('video').attr('id'),{loop:true,features:[],videoWidth:obj.options.width,videoHeight:obj.options.height,enableAutosize:true,success:function(mediaElement,domObject){mediaElement.play();}}),id:jQuery(this).find('video').attr('id')};}});obj.showDesc(obj.current.find('div.slider-desc'));},100);};this.resize=function(h,w,maxh,maxw){var ratio=maxh/maxw;if(h/w>ratio){if(h>maxh){w=Math.round(w*(maxh/h));h=maxh;}}else if(h/w<ratio){if(w>maxh){h=Math.round(h*(maxw/w));w=maxw;}
else
{h=Math.round(h*(maxw/w));}}
return[h,w];};this.scale=function(h,w,maxh,maxw){var ratio=maxh/maxw;if(h/w<ratio){if(w>=maxw){h=Math.round(maxh*(w/maxw));w=w;}}
return[h,w];};this.responsiveAuto=function(){var cf=this.options.width;if(this.options.full_width)
{temp=this.resize(this.options.height,cf,this.options.height,this.element.parent().width());temp[1]=this.element.parent().width();this.responsivePercent=(temp[1]/cf)*100;this.isresponsive=true;if(obj.options.adaptive||(this.current.find('img').length>0&&this.current.find('img').height()<temp[0]))
temp[0]=obj.current.find('img').height();if(this.current.find('img').length==0&&temp[1]<1060)
{temp[0]=temp[0]*temp[1]/1060;if(temp[0]<250)temp[0]=250;}
this.element.css({height:temp[0],width:temp[1]});this.holder.css({height:temp[0],width:temp[1]});obj.r.w=temp[1];obj.r.h=temp[0];this.element.find("ul.quartz-bullets").css({"left":temp[1]-(temp[1]/2+this.element.find("ul.quartz-bullets").width()/2)});if(obj.options.bullets==true&&this.slides.length>1)
{obj.bullets.parent().css({"left":temp[1]-(temp[1]/2+obj.bullets.parent().width()/2)});}
if(this.options.caption)
{if(this.current.find('div.slider-desc').hasClass('s-c-l')||this.current.find('div.slider-desc').hasClass('s-c-c')||this.current.find('div.slider-desc').hasClass('s-c-r'))
{this.current.find('div.slider-desc').css('top',temp[0]/2-this.current.find('div.slider-desc').outerHeight()/2+"px");}}}
else if(this.element.parent().width()<=cf){temp=this.resize(this.options.height,cf,this.options.height,this.element.parent().width());if(temp[1]>this.element.parent().width())
{temp[1]=this.element.parent().width();}
this.responsivePercent=(temp[1]/cf)*100;this.isresponsive=true;this.element.css({width:temp[1]});this.holder.css({width:temp[1]});if(obj.options.adaptive)
temp[0]=obj.current.find('img').height();this.holder.css({height:temp[0]});obj.r.w=temp[1];obj.r.h=temp[0];this.element.find("ul.quartz-bullets").css({"left":temp[1]-(temp[1]/2+this.element.find("ul.quartz-bullets").width()/2)});if(obj.options.bullets==true&&this.slides.length>1)
{obj.bullets.parent().css({"left":temp[1]-(temp[1]/2+obj.bullets.parent().width()/2)});}
if(obj.options.caption)
{if(obj.current.find('div.slider-desc').hasClass('s-c-l')||obj.current.hasClass('s-c-c')||obj.current.hasClass('s-c-r'))
{obj.current.find('div.slider-desc').css('top',temp[0]/2-obj.current.find('div.slider-desc').outerHeight()/2+"px");}}}
else
{this.responsivePercent=100;this.isresponsive=false;this.element.css({width:obj.options.width});this.holder.css({width:obj.options.width,height:obj.options.height});obj.r.w=obj.options.width;obj.r.h=obj.options.height;this.element.find("ul.quartz-bullets").css({"left":this.options.width-(this.options.width/2+this.element.find("ul.quartz-bullets").width()/2)});if(obj.options.bullets==true&&this.slides.length>1)
{obj.bullets.parent().css({"left":this.options.width-(this.options.width/2+obj.bullets.parent().width()/2)});}
if(this.options.caption)
{if(this.current.find('div.slider-desc').hasClass('s-c-l')||this.current.find('div.slider-desc').hasClass('s-c-c')||this.current.find('div.slider-desc').hasClass('s-c-r'))
{this.current.find('div.slider-desc').css('top',obj.options.height/2-this.current.find('div.slider-desc').outerHeight()/2+"px");}}}};this.prepareSlide=function(slide)
{obj.element.trigger('quartzSlideBeforeChange',[obj.slides.index(slide)]);obj.flag=false;if(this.current.find('.quant_video-bg').length>0)
{for(var i=0;i<obj.videos;i++)
{if(obj.videos[i].id==this.current.find('video').attr('id'))
{obj.videos[i].el.pause();}}}
slide.removeClass('hidden');switch(this.options.effect_type)
{case'fade':slide.css({opacity:0});break;case'scroll':slide.css({marginLeft:this.r.w+'px'});break;case'overlap-left':slide.css({x:this.r.w+'px'});break;case'overlap-right':slide.css({x:-this.r.w+'px'});break;case'overlap-top':slide.css({y:this.r.h+'px'});break;case'overlap-bottom':slide.css({y:-this.r.h+'px'});break;case'scroll-perspective':slide.css({x:this.r.w+'px',opacity:0,perspective:400,rotateY:'-50deg'});break;}
this.prev.removeClass('reset').addClass('hidden');this.prev=this.current.addClass('reset').removeClass('active');this.current=slide.addClass('active').removeClass('hidden');this.current.find('div.slider-desc').hide();if(this.current.next('div.slider-item').length>0)
this.next=this.current.next('div.slider-item');else
this.next=this.slides.first('div.slider-item');clearTimeout(this.timer);this.animate(slide);}
this.effect=function(){this.prepareSlide(this.next);};this.animate=function(slide)
{this.startProgressBar();switch(this.options.effect_type)
{case'fade':this.prev.transition({opacity:0},700,'');slide.transition({opacity:1},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;case'overlap-left':case'overlap-right':slide.transition({x:0},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;case'overlap-bottom':case'overlap-top':slide.transition({y:0},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;case'scroll':this.prev.transition({marginLeft:-this.r.w},700,'');slide.transition({marginLeft:0},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;case'scroll-perspective':this.prev.transition({x:-this.r.w,opacity:0,perspective:400,rotateY:'30deg'},700);slide.transition({x:0,opacity:1,rotateY:'0deg'},700,'',function(){obj.element.trigger('quartzSlideChanged',[obj.slides.index(slide)]);});break;}
if(this.options.adaptive)
{this.holder.animate({height:slide.find('img').height()},400);}
if(this.current.find('.quant_video-bg').length>0)
{for(var i=0;i<obj.videos;i++)
{if(obj.videos[i].id==this.current.find('video').attr('id'))
{obj.videos[i].el.play();}}}
this.updateSlide();}
this.updateSlide=function()
{clearTimeout(this.timer);if(this.autoplay_flag===false&&obj.options.autoplay===true)
this.timer=setTimeout(function(){obj.effect();},this.options.duration);}
this.addControls=function()
{var lc='',str='<div class="quartz-controls-wrap"> <a href="" class="quartz-controls ioa-front-icon angle-lefticon- slider-prev"></a>';if(this.element.find('.ioa-lightbox-icon').length==0)lc='no-lightbox';if(obj.options.autoplay===true)str+='<a href="" class="quartz-controls '+lc+' ioa-front-icon pause-2icon- autoplay-control slider-pause"></a>';str+='<a href="" class="quartz-controls ioa-front-icon angle-righticon- slider-next"></a> </div>';this.holder.after(str);this.element.on("click",'a.slider-prev',function(e){e.preventDefault();var index=obj.slides.index(obj.current);if(index==0)index=obj.slides.length-1;else index=index-1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});obj.element.bind('swipeleft',function(){var index=obj.slides.index(obj.current);if(index==obj.slides.length-1)index=0;else index=index+1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});obj.element.bind('swiperight',function(){var index=obj.slides.index(obj.current);if(index==0)index=obj.slides.length-1;else index=index-1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});this.element.on("click",'a.slider-next',function(e){var index=obj.slides.index(obj.current);e.preventDefault();if(index==obj.slides.length-1)index=0;else index=index+1;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});this.element.on("click",'a.slider-pause',function(e){e.preventDefault();if(jQuery(this).hasClass('pause-2icon-'))
{obj.autoplay_flag=true;obj.flag=true;jQuery(this).addClass('play-2icon-').removeClass('pause-2icon-');clearTimeout(obj.timer);obj.resetProgressBar();}
else
{obj.autoplay_flag=false;obj.flag=false;jQuery(this).addClass('pause-2icon-').removeClass('play-2icon-');obj.updateSlide();obj.startProgressBar();}});this.element.find("ul.quartz-bullets").css({"left":this.options.width-(this.options.width/2+this.element.find("ul.quartz-bullets").outerWidth()/2)});}
this.addBullets=function()
{var str='<div class="quartz-bullets-wrap"><ul class="quartz-bullets">';this.slides.each(function(){str+="<li style='opacity:0;'></li>";});str+="</ul></div>";this.element.append(str);this.bullets=this.element.find('ul.quartz-bullets li');this.bullets.first().addClass('active');if(jQuery(window).width()>1024)
setTimeout(function(){obj.bullets.each(function(i){jQuery(this).css("scale",0.5);jQuery(this).delay(i*170).transition({opacity:1,scale:1},700);});},200);else
obj.bullets.css("opacity",1);this.thumb_wrap=this.element.find('ul.quartz-bullets');this.thumb_holder=this.thumb_wrap.parent();obj.bullets.on("click",function(){var index=obj.bullets.index(jQuery(this));if(jQuery(this).hasClass('active'))return;obj.resetProgressBar();clearTimeout(obj.timer);obj.flag=true;obj.prepareSlide(obj.slides.eq(index));});}
this.showDesc=function(desc)
{if(this.options.caption)
{if(desc.hasClass('s-c-l')||desc.hasClass('s-c-c')||desc.hasClass('s-c-r'))
{desc.css('top',obj.r.h/2-desc.outerHeight()/2+"px");}
var h=desc.find('h4').css({opacity:0,marginTop:15});var cap=desc.find('.caption').css({opacity:0,marginTop:15});desc.show();h.transition({opacity:1,marginTop:0},200,'easeOutCubic');cap.transition({opacity:1,marginTop:0},200,'easeOutCubic');}}
this.startProgressBar=function()
{if(this.autoplay_flag===false&&obj.options.autoplay===true){this.progress_bar.stop(true,true).css("width",0);this.progress_bar.animate({"width":obj.r.w},this.options.duration);}}
this.resetProgressBar=function()
{if(obj.options.autoplay===true){this.progress_bar.stop(true,false).animate({"width":0},'fast');}}
if(this.options.domMapping===true)this.htmldatamap();this.element.bind('quartzSlideChanged',function(event,index){obj.showDesc(obj.slides.eq(index).find('div.slider-desc'));});if(obj.options.bullets===true)
{this.element.bind('quartzSlideBeforeChange',function(event,index){obj.bullets.removeClass('active');obj.bullets.eq(index).addClass('active');});}
function ioapreloader(obj,callback)
{var images=[];images=jQuery.makeArray(obj.find('img'));var limit=images.length,timer,i,index;timer=setInterval(function(){if(limit<=0)
{callback();clearInterval(timer);return;}
for(i=0;i<images.length;i++)
{if(images[i].complete||images[i].readyState==4)
{images.splice(i,1);limit--;}}},200);}
obj.setup();ioapreloader(this.element,function(){obj.init();});}
jQuery.fn.quartzSlider=function(options){return this.each(function(){if(!jQuery.data(this,'plugin_'+pluginName)){jQuery.data(this,'plugin_'+pluginName,new Quartz(this,options));}});};jQuery.noConflict();if(!jQuery.support.transition){jQuery.fn.transition=jQuery.fn.animate;}
jQuery(document).ready(function(){"use strict";jQuery('.rad-holder').children('p').remove();jQuery('div.metro-blog-wrapper').width(jQuery(window).width()-290);jQuery(".format-video, .video, .ioa-video ").fitVids();if(!jQuery('.super-wrapper').hasClass('no-np-loader'))
NProgress.start();if((window.retina||window.devicePixelRatio>1)){var logo=jQuery('#logo img');if(typeof logo.data('retina')!="undefined"&&logo.data('retina')!="")
logo.attr('src',logo.data('retina'));}
var icon='angle-righticon-';if(jQuery('body').hasClass('rtl'))icon='angle-lefticon-';jQuery(".sidebar-wrap.widget_recent_entries ul li,.sidebar-wrap.widget_archive ul li, .sidebar-wrap.widget_categories ul li, .sidebar-wrap.widget_meta ul li, .sidebar-wrap.widget_recent_comments ul li , .sidebar-wrap.widget_nav_menu ul li  ").append('<i class="ioa-front-icon  '+icon+' w-pin"></i>');});function main_code(){"use strict";setTimeout(function(){jQuery('div.ioa_overlay').transition({opacity:0},400,'',function(){jQuery(this).remove();});},1000);var DEBUGMODE=false;var obj,temp,i,j,k,parent,str='',super_wrapper=jQuery('.super-wrapper'),doc=jQuery(document);var win={obj:jQuery(window),width:null,height:null},responsive={ratio:1,width:1060,height:600,platform:'web',getPlatform:function(){}},utils={debug:function(message){if(window.console&&window.console.log&&DEBUGMODE)
window.console.log('~~ IOA Debug Mode: '+message);},exists:function(cl){if(bowser.msie&&bowser.version<8)
if(getElementsByClassName(document.body,cl).length>0)return true;else return false;if(bowser.msie&&bowser.version<=8)
if(document.querySelectorAll('.'+cl).length>0)return true;else return false;else
if(typeof super_wrapper[0]!="undefined"&&super_wrapper[0].getElementsByClassName(cl).length>0)return true;else return false;},existsP:function(cl,parent){if(bowser.msie&&bowser.version<8)
if(getElementsByClassName(parent,cl).length>0)return true;else return false;if(bowser.msie&&bowser.version<=8)
if(document.querySelectorAll('.'+cl).length>0)return true;else return false;else
if(parent.getElementsByClassName(cl).length>0)return true;else return false;}};win.width=win.obj.width();win.height=win.obj.height();responsive.ratio=jQuery('.skeleton').width()/1060;responsive.width=win.width;responsive.height=win.height;var iso_layout='fitRows',iso_opts;jQuery('.video-bg').each(function(){jQuery(this).css({width:responsive.width,height:jQuery(this).parents('.page-section').outerHeight()});jQuery(this).children('video').mediaelementplayer({loop:true,features:[]});});if(!super_wrapper.hasClass('no-np-loader')){win.obj.load(function(){NProgress.done(true);});}
if(jQuery('.video-player').length>0)
jQuery('.video-player video').mediaelementplayer({features:['playpause','progress','current','duration','tracks','volume','fullscreen']});if(win.width<=767){responsive.ratio=(win.obj.width()*0.7)/1060;}
jQuery('a.wpml-lang-selector').click(function(e){e.preventDefault();var l=jQuery(this).next();if(l.is(':hidden')){l.css({opacity:0,marginTop:-10,display:"block"}).transition({opacity:1,marginTop:0},400);}else{l.transition({opacity:0,marginTop:0},400,'',function(){l.hide();});}});jQuery('.live_search').focusin(function(){if(jQuery(this).val()==""||jQuery(this).val()==ioa_localize.search_placeholder)jQuery(this).val('');});jQuery('.live_search').focusout(function(){if(jQuery(this).val()=="")jQuery(this).val(ioa_localize.search_placeholder);});jQuery('.sc_name,.sc_email,.sc_msg').focusin(function(){if(jQuery(this).val()==""||jQuery(this).val()==jQuery(this).data('default'))jQuery(this).val('');});jQuery('.sc_name,.sc_email,.sc_msg').focusout(function(){if(jQuery(this).val()=="")jQuery(this).val(jQuery(this).data('default'));});var valFlag=false;jQuery(".sc_submit").click(function(e){e.preventDefault();obj=jQuery(this);valFlag=false;obj.parent().find("input[type=text],input[type=email],textarea").each(function(){temp=jQuery(this);if(jQuery(this).hasClass('sc_email')&&!validateEmail(jQuery(this).val())){temp.addClass("error");valFlag=true;temp.parent().find('.error-note').css('visibility','visible').transition({opacity:0.8},300);}else if(jQuery.trim(jQuery(this).val())===""||temp.val()===jQuery(this).data('default')){temp.addClass("error");valFlag=true;temp.parent().find('.error-note').css('visibility','visible').transition({opacity:0.8},300);}else{temp.removeClass("error");temp.parent().find('.error-note').transition({opacity:0},300,'',function(){jQuery(this).css('visibility','hidden');});}});if(valFlag){return;}
var msg=obj.parent().find(".success");obj.val(obj.data('sending'));jQuery.post(ioa_listener_url,{type:'sticky_contact',action:'ioalistener',name:obj.parent().find('.sc_name').val(),email:obj.parent().find('.sc_email').val(),msg:obj.parent().find('.sc_msg').val(),notify_email:obj.parent().find(".notify_email").val()},function(data){obj.val(obj.data('sent'));msg.fadeIn("slow").delay(3000).fadeOut("fast");obj.parent().find("input[type=text],input[type=email],textarea").each(function(){jQuery(this).val(jQuery(this).data('default'));});});});jQuery('div.sticky-contact a.trigger').click(function(e){e.preventDefault();if(jQuery('div.sticky-contact').offset().left>responsive.width-50){jQuery('div.sticky-contact').transition({right:0},400);}else{jQuery('div.sticky-contact').transition({right:-301},400);jQuery('div.sticky-contact').parent().find('.error-note').transition({opacity:0},300,'',function(){jQuery(this).css('visibility','hidden');});}});var compact_menu=jQuery('div.compact-bar ul.menu'),compact_bar=jQuery('div.compact-bar'),themeheader=jQuery('.theme-header').height();var topbar=jQuery('#top-bar'),menu_area=jQuery('div.top-area-wrapper'),menu_bar,bottombar=jQuery('.bottom-area');win.obj.scroll(function(){if(win.obj.scrollTop()>(themeheader)){if(compact_bar.is(':hidden'))
compact_bar.fadeIn('normal');jQuery('a.back-to-top').stop(true,true).fadeIn('normal')}
if(win.obj.scrollTop()<(themeheader)){if(compact_bar.is(':visible'))
compact_bar.fadeOut('fast');jQuery('a.back-to-top').stop(true,true).fadeOut('normal')}});var Menu_builder={center:function(menu){var childs=menu.children('li'),width=0;childs.each(function(){width+=jQuery(this).outerWidth()+4+parseInt(jQuery(this).css('margin-right'));});setTimeout(function(){if(menu.hasClass('menu')){var fz=parseInt(childs.children('a').css('font-size'));menu.parents('.menu-wrapper').width(width+2+(fz*2)).animate({opacity:1},'normal');}else{menu.width(width+2);menu.animate({opacity:1},'normal');}},30);},appendMenuTail:function(menu){var arrow='';menu.find('li').each(function(){if(jQuery(this).children('.sub-menu').length>0){if(jQuery(this).is(menu.children())){arrow='<span class="menu-arrow ioa-front-icon down-diricon-"></span>';}else{arrow='<span class="menu-arrow ioa-front-icon rights-dir-1icon-"></span>';}
jQuery(this).children('a').append('<span class="menu-tail"></span>'+arrow);if(jQuery(this).children('ul.sub-menu').length>0){jQuery(this).addClass('hasDropDown relative');}else{jQuery(this).addClass('hasDropDown');}
jQuery(this).children('.sub-menu').append('<span class="faux-holder"></span>');}});},childHoverEffect:function(menu){menu.find('li.menu-item').each(function(){obj=jQuery(this);obj.hoverdir();});},registerMenuHover:function(menu){var effect=menu.parents('div.menu-wrapper').data('effect'),sense;menu.find('li').hoverIntent(function(){temp=jQuery(this);temp.removeClass('forceRightChain');if(temp.find('.sub-menu .sub-menu').length>0)
sense=(responsive.width-(temp.offset().left+temp.width())-(180*2));else
sense=(responsive.width-(temp.offset().left+temp.width())-(180));if(sense<0&&temp.children('div.sub-menu').length===0&&temp.is(menu.children())){temp.addClass('forceRightChain');temp.find('ul.sub-menu').find('.menu-arrow').addClass('left-dir-1icon-').removeClass('right-dir-1icon-');}else{temp.find('ul.sub-menu').find('.menu-arrow').addClass('right-dir-1icon-').removeClass('left-dir-1icon-');}
if(utils.existsP('sub-menu',this)){switch(effect){case'None':temp.children('.sub-menu').stop(true,true).show();break;case'Fade':temp.children('.sub-menu').stop(true,true).fadeIn('normal');break;case'Fade Shift Down':temp.children('.sub-menu').css({'opacity':0,'display':'block',marginTop:-10});temp.children('.sub-menu').stop(true,true).animate({opacity:1,marginTop:0},300);break;case'Fade Shift Right':temp.children('.sub-menu').css({'opacity':0,'display':'block',marginLeft:-10});temp.children('.sub-menu').stop(true,true).transition({opacity:1,marginLeft:0},300);break;case'Scale In Fade':temp.children('.sub-menu').css({'opacity':0,'display':'block',scale:1.2});temp.children('.sub-menu').stop(true,true).transition({opacity:1,scale:1});break;case'Scale Out Fade':temp.children('.sub-menu').css({'opacity':0,'display':'block',scale:0.8});temp.children('.sub-menu').stop(true,true).transition({opacity:1,scale:1});break;case'Grow':temp.children('.sub-menu').stop(true,true).show('normal');break;case'Slide':temp.children('.sub-menu').stop(true,true).slideDown('normal');break;default:temp.children('.sub-menu').stop(true,true).fadeIn('normal');break;}}},function(){if(utils.existsP('sub-menu',this)){temp=jQuery(this);switch(effect){case'None':temp.children('.sub-menu').stop(true,true).hide();break;case'Fade':temp.children('.sub-menu').stop(true,true).fadeOut('normal');break;case'Fade Shift Down':temp.children('.sub-menu').stop(true,true).transition({opacity:0,marginTop:-10},300,function(){jQuery(this).hide()});break;case'Fade Shift Right':temp.children('.sub-menu').stop(true,true).transition({opacity:0,marginLeft:-10},300,function(){jQuery(this).hide()});break;case'Scale In Fade':temp.children('.sub-menu').stop(true,true).transition({opacity:0,scale:1.2},200,'',function(){jQuery(this).hide()});break;case'Scale Out Fade':temp.children('.sub-menu').stop(true,true).transition({opacity:0,scale:0.8},200,'',function(){jQuery(this).hide()});break;case'Grow':temp.children('.sub-menu').stop(true,true).hide('normal');break;case'Slide':temp.children('.sub-menu').stop(true,true).slideUp('normal');break;default:temp.children('.sub-menu').stop(true,true).fadeOut('normal');break;}}});}}
Menu_builder.childHoverEffect(jQuery('.theme-header .menu, div.sidebar-wrap ul.sub-menu, .compact-bar .menu'));Menu_builder.appendMenuTail(compact_menu);Menu_builder.registerMenuHover(compact_menu);if(utils.exists('menu-centered')){jQuery('.menu-centered .menu').each(function(){Menu_builder.center(jQuery(this));});}
Menu_builder.appendMenuTail(jQuery('.theme-header .menu'));Menu_builder.registerMenuHover(jQuery('.theme-header .menu , div.sidebar-wrap ul.menu'));setTimeout(function(){if(compact_menu.length>0){var cposi=compact_bar.find('.menu-wrapper').position().left;compact_menu.children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(cposi+jQuery(this).position().left)+"px");}});compact_bar.css({'display':'none','visibility':'visible'});}
if(menu_area.find('.menu').length>0){menu_area.find('.menu-wrapper').each(function(){var temp=jQuery(this),posi=temp.position().left;temp.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}
if(jQuery('.fluid-menu').length>0){jQuery(this).find('div.sub-menu').width(responsive.width);}});});}
if(topbar.find('.menu').length>0){topbar.find('.menu-wrapper').each(function(){var temp=jQuery(this),posi=temp.position().left;temp.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}});});}
if(bottombar.find('.menu').length>0){bottombar.find('.menu-wrapper').each(function(){var temp=jQuery(this),posi=temp.position().left;temp.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}});});}
if(win.obj.scrollTop()>(themeheader)){jQuery('a.back-to-top').stop(true,true).fadeIn('normal')
compact_bar.stop(true,true).fadeIn('normal');}},80);jQuery('div.sub-menu li a').hover(function(){jQuery(this).stop(true,true).transition({paddingLeft:24},400);},function(){if(!(jQuery(this).parent().hasClass('current-menu-item')||jQuery(this).parent().hasClass('current_page_item')))
jQuery(this).stop(true,true).transition({paddingLeft:0},400);});jQuery('ul.top-area-social-list li a').hover(function(){temp=jQuery(this);temp.children('.proxy-color').stop(true,true).transition({opacity:1},300);},function(){temp=jQuery(this);temp.children('span.proxy-color').stop(true,true).transition({opacity:0},300);});var search_parent=jQuery('.ajax-search'),search_loader=search_parent.find('span.search-loader');jQuery('.ajax-search-pane input[type=text]').keyup(function(e){var val=jQuery(this).val().length;if(e.keyCode==27){jQuery('a.ajax-search-trigger').trigger('click');return;}
if(val>=2){search_loader.fadeIn('fast');jQuery.post(search_parent.data('url'),{type:'search',action:'ioalistener',query:jQuery(this).val()},function(data){if(jQuery.trim(data)=="")return;search_parent.find('.no-results').fadeOut('fast');search_parent.find('.search-results ul').html(data);search_parent.find('div.search-results').stop(true,true).fadeIn('fast',function(){search_loader.fadeOut('fast');});});}else{search_parent.find('div.search-results').hide();search_parent.find('.search-results ul').html('');}});jQuery('body').bind('rad_widget_dropped',function(e,key,obj){PageWidgets(obj);});jQuery('body').bind('rad_widget_preview',function(e,key,obj){PageWidgets(obj);});jQuery('a.ajax-search-trigger').click(function(e){e.preventDefault();temp=jQuery(this).parent().find('div.ajax-search-pane');if(temp.is(":hidden")){temp.css({'opacity':0,'display':'block',marginTop:-20});temp.stop(true,true).transition({opacity:1,marginTop:0});jQuery('a.ajax-search-trigger').addClass('active');}else{temp.stop(true,true).transition({opacity:0,marginTop:-20},200,'',function(){jQuery(this).hide()});jQuery('a.ajax-search-trigger').removeClass('active');}});jQuery('a.ajax-search-close').click(function(e){e.preventDefault();jQuery(this).parent().stop(true,true).transition({opacity:0,marginTop:-20},200,'',function(){jQuery(this).hide()});jQuery('a.ajax-search-trigger').removeClass('active');});var title_area=jQuery('div.title-wrap'),delay=0,delay_inc=parseFloat(title_area.data('delay'))*1000,animate_delay=parseFloat(title_area.data('duration'))*1000,animate_position=title_area.data('position');var effect_builder={animate:function(el,effect){switch(effect){case'fade':el.delay(delay).transition({opacity:1},'slow');break;case'fade-left':case'fade-right':el.delay(delay).transition({margin:'0px',opacity:1,duration:500});break;case'rotate-left':el.css({rotate:'-40deg'}).delay(delay).transition({opacity:1,rotate:'0deg'});break;case'rotate-right':el.css({rotate:'40deg'}).delay(delay).transition({opacity:1,rotate:'0deg'});break;case'scale-in':el.css({scale:1.2}).delay(delay).transition({opacity:1,scale:1});break;case'scale-out':el.css({scale:0.8}).delay(delay).transition({opacity:1,scale:1});break;case'curtain-fade':setTimeout(function(){el.data("width",el.width()+parseInt(el.children().css("padding-left")));el.width(0);el.children().css({"opacity":0,"width":el.data("width")});el.transition({width:el.data("width"),opacity:1,duration:500});setTimeout(function(){el.children().transition({opacity:1},'fast');},600);},delay);break;case'curtain-show':setTimeout(function(){el.data("width",el.width()+parseInt(el.children().css("padding-left")));el.css({width:0,overflow:"hidden"});el.children().css({"opacity":0,"width":el.data("width"),x:-el.data("width")});el.transition({width:el.data("width"),opacity:1,duration:500});setTimeout(function(){el.children().transition({opacity:1,x:0},'fast');},600);},delay);break;case'metro':el.transition({perspective:'800px',rotateY:'0deg',opacity:1});break;case'animate-bg':el.transition({backgroundPosition:animate_position},animate_delay,'linear');break;}
delay+=delay_inc;}}
if(title_area.length>0){if(title_area.data('effect')=="metro")title_area.css({perspective:'400px',rotateY:'25deg',opacity:0});jQuery(window).load(function(){effect_builder.animate(title_area,title_area.data('effect'));setTimeout(function(){if(utils.exists('animate-block'))
jQuery('.animate-block').each(function(){effect_builder.animate(jQuery(this),jQuery(this).data('effect'));});},200);});}
if(utils.exists('power-section')){if(!utils.exists('power-overlay'))
jQuery('body').append('<div class="power-overlay"></div> <div class="power-overlay-content clearfix"><div class="filler"></div> <a href="" class="close  cancel-2icon- ioa-front-icon"></a> </div>');var ov=jQuery('body').find('.power-overlay');var ovc=jQuery('body').find('.power-overlay-content');jQuery('.power-section h3').click(function(){ovc.children('div.filler').html(jQuery(this).next().html());ov.css({display:'block','opacity':0,"background-color":jQuery(this).css("background-color")}).transition({opacity:0.7},400);ovc.css({display:'block',opacity:0,scale:0.5,"background-color":jQuery(this).css("background-color")});ovc.css({height:ovc.children('div.filler').height()+40,left:responsive.width/2-225,top:responsive.height/2-ovc.height()/2}).transition({opacity:1,scale:1},400);});ovc.find('a.close').on("click",function(e){e.preventDefault();ov.fadeOut('normal');setTimeout(function(){ovc.transition({opacity:0,scale:0},400,'');},100);});}
jQuery('div.posts_slider div.slide').hover(function(){jQuery(this).children('div.desc').fadeIn('normal');},function(){jQuery(this).children('div.desc').fadeOut('normal');});if(utils.exists('media-listener')){jQuery('.media-listener').waypoint(function(){var c=jQuery(this);switch(c.data('effect')){case'fade':c.transition({opacity:1},400);break;case'fade-right':c.css({x:-20}).transition({opacity:1,x:0},400);break;case'fade-left':c.css({x:20}).transition({opacity:1,x:0},400);break;case'fade-grow':c.css({scale:0.4}).transition({opacity:1,scale:1},400);break;}},{offset:'70%',triggerOnce:true});}
var topspace=0;if(compact_menu.length>0)topspace=45;jQuery('.sticky-right-sidebar,.sticky-left-sidebar').sticky({topSpacing:topspace,bottomSpacing:jQuery('#footer').outerHeight()});jQuery('div.ioa_box a.close').click(function(e){e.preventDefault();jQuery(this).parent().parent().slideUp('normal',function(){jQuery(this).remove();})});if(utils.exists('ioa_tabs')){jQuery(".ioa_tabs").tabs({show:{effect:"fadeIn",duration:300}})}
if(utils.exists('ioa_accordion')){jQuery(".ioa_accordion").accordion({create:function(event,ui){ui.header.find('i').removeClass('down-diricon-').addClass('up-diricon-')},beforeActivate:function(event,ui){ui.newHeader.find('i').removeClass('down-diricon-').addClass('up-diricon-');ui.oldHeader.find('i').addClass('down-diricon-').removeClass('up-diricon-');},heightStyle:"content"});}
function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return"rgba("+parseInt(result[1],16)+","+parseInt(result[2],16)+","+parseInt(result[3],16)+",0.6)";}
win.obj.load(function(){if(utils.exists('menu-centered')){jQuery('.menu-centered .top-area-social-list').each(function(){Menu_builder.center(jQuery(this));});}
if(utils.exists('line-chart-wrap')){jQuery('.line-chart-wrap').waypoint(function(){temp=jQuery(this),vals;var ds=[];temp.find('.line-val').each(function(i){vals=jQuery(this).data('values').toString();if(vals.indexOf(',')!=-1){vals=vals.split(',');}else
vals=[parseInt(vals)];for(var j=0;j<vals.length;j++)vals[j]=parseInt(vals[j]);ds[i]={fillColor:jQuery(this).data('fillcolor'),strokeColor:jQuery(this).data('strokecolor'),pointColor:jQuery(this).data('pointcolor'),pointStrokeColor:jQuery(this).data('pointstrokecolor'),data:vals};});var data={labels:temp.data('labels').split(','),datasets:ds}
var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).Line(data,options);},{offset:'70%',triggerOnce:true});}
if(utils.exists('polar-chart-wrap')){jQuery('.polar-chart-wrap').waypoint(function(){temp=jQuery(this);var ds=[],total=0;temp.find('.polar-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.polar-val').each(function(j){ds[j]={value:parseInt(jQuery(this).data('value')),color:jQuery(this).data('fillcolor')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).PolarArea(ds,options);},{offset:'70%',triggerOnce:true});}
if(utils.exists('pie-chart-wrap')){jQuery('.pie-chart-wrap').waypoint(function(){temp=jQuery(this);var ds=[],total=0;temp.find('.pie-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.pie-val').each(function(i){ds[i]={color:jQuery(this).data('fillcolor'),value:jQuery(this).data('value')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);new Chart(ctx).Pie(ds,{animateScale:true,animationEasing:"easeOutExpo"});},{offset:'70%',continuous:false,triggerOnce:true});}
if(utils.exists('donut-chart-wrap')){jQuery('.donut-chart-wrap').waypoint(function(){temp=jQuery(this);temp=jQuery(this);var ds=[],total=0;temp.find('.donut-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.donut-val').each(function(i){ds[i]={color:jQuery(this).data('fillcolor'),value:jQuery(this).data('value')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);new Chart(ctx).Doughnut(ds,{animationEasing:"easeOutExpo"});},{offset:'70%',triggerOnce:true});}
if(utils.exists('bar-chart-wrap')){var vals;jQuery('.bar-chart-wrap').waypoint(function(){temp=jQuery(this);var ds=[],j;temp.find('.bar-val').each(function(i){vals=jQuery(this).data('values').toString();if(vals.indexOf(',')!=-1){vals=vals.split(',');}else
vals=[parseInt(vals)];for(var j=0;j<vals.length;j++)vals[j]=parseInt(vals[j]);ds[i]={fillColor:jQuery(this).data('fillcolor'),strokeColor:jQuery(this).data('strokecolor'),data:vals};});var data={labels:temp.data('labels').split(','),datasets:ds}
console.log(ds);var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).Bar(data,options);},{offset:'70%',triggerOnce:true});}});if(utils.exists('toggle-title')){jQuery('a.toggle-title').click(function(e){e.preventDefault();if(jQuery(this).next().is(':hidden')){jQuery(this).children('i').removeClass('plus-1icon-').addClass(' minusicon-');}else{jQuery(this).children('i').addClass('plus-1icon-').removeClass(' minusicon-');}
jQuery(this).next().slideToggle('normal');});}
jQuery('a.ioa-button').hover(function(){jQuery(this).children('span.underlay').stop(true,true).fadeIn('normal');},function(){jQuery(this).children('span.underlay').stop(true,true).fadeOut('normal');});jQuery("div.text-inner-wrap").hoverIntent(function(){var icon=jQuery(this).find('.icon,.ioa-front-icon');if(icon.data('icon_hover')!="")
icon.children('.icon-wrap').addClass(icon.data('icon_hover'));},function(){var icon=jQuery(this).find('.icon,.ioa-front-icon');if(icon.data('icon_hover')!="")
icon.children('.icon-wrap').removeClass(icon.data('icon_hover'));});if(utils.exists('ioa-gallery')){jQuery('.ioa-gallery').seleneGallery({domMapping:true});}
if(utils.exists('ioaslider')){jQuery('.ioaslider').quartzSlider({domMapping:true});}
if(utils.exists('scrollable')){var t,n,minx;jQuery('.scrollable').each(function(){t=jQuery(this).parent().width();n=jQuery(this).children().width()+20;minx=Math.ceil(t/n);jQuery(this).bxSlider({slideWidth:n,maxSlides:minx,moveSlides:minx,infiniteLoop:false,slideMargin:20,pager:false});});}
jQuery(document).on('mouseenter','.bx-wrapper',function(){jQuery(this).find('.bx-controls ').stop(true,true).transition({opacity:1},400);});jQuery(document).on('mouseleave','.bx-wrapper',function(){jQuery(this).find('.bx-controls ').stop(true,true).transition({opacity:0},400);});if(utils.exists('magic-list-wrapper')){var hf=0,line;win.obj.load(function(){jQuery('.magic-list-wrapper').each(function(){hf=0;line=jQuery(this).children('.line');jQuery(this).find('li').each(function(i){if(jQuery(this).next().length>0)hf+=jQuery(this).outerHeight(true);temp=jQuery(this).children('div.icon-area');temp.delay(i*200).transition({opacity:1,scale:1,backgroundColor:temp.data('color')},500);});});});}
if(utils.exists('rad-testimonials-list')){jQuery('ul.rad-testimonials-list').bxSlider({mode:'fade',adaptiveHeight:true,pager:false,auto:true,maxSlides:minx,moveSlides:minx,});}
var w;if(utils.exists('radial-chart')){jQuery('.radial-chart').each(function(){w=jQuery(this).data('width');if(w>jQuery(this).width())w=jQuery(this).width()-20;jQuery(this).easyPieChart({size:w,lineWidth:jQuery(this).data('line_width'),barColor:jQuery(this).data('bar_color'),trackColor:jQuery(this).data('track_color'),scaleColor:false,lineCap:"butt",animate:2000}).data('easyPieChart').update(0);});jQuery('.radial-chart').waypoint(function(){jQuery(this).data('easyPieChart').update(jQuery(this).data('start_percent'));},{offset:'70%',triggerOnce:true});}
if(utils.exists('progress-bar-group')){if(!bowser.msie)jQuery(' div.progress-bar div.filler span').show();win.obj.load(function(){jQuery('.progress-bar-group').waypoint(function(){jQuery(this).find('div.progress-bar').each(function(i){jQuery(this).find('div.filler').delay(i*100).transition({opacity:1,width:parseInt(jQuery(this).find('div.filler').data('fill'))+"%"},1500,'easeInOutQuint',function(){jQuery(this).children().fadeIn('fast');});});},{offset:'70%',triggerOnce:true});});}
if(utils.exists('circles-group')){win.obj.load(function(){jQuery('div.circles-group').waypoint(function(){var parentw=jQuery(this).width();if(parentw>=jQuery(this).parent().width()){parentw=jQuery(this).parent().width();jQuery(this).width(parentw);jQuery(this).height(parentw);}
jQuery(this).find('div.circle').each(function(j){jQuery(this).css({"left":(parentw-parseInt(jQuery(this).data('fill'))/100*parentw)/2,scale:0.2});jQuery(this).delay(j*100).transition({opacity:1,scale:1,width:parseInt(jQuery(this).data('fill'))+"%",height:parseInt(jQuery(this).data('fill'))+"%"},500);});},{offset:'70%',triggerOnce:true});});}
jQuery('div.related-menu li').click(function(){jQuery('div.related-menu li').removeClass('active');jQuery(this).addClass('active');temp=jQuery(this).data('val');jQuery('div.related-posts-wrap ul').not("."+temp).transition({opacity:0,scale:0},300,'',function(){jQuery(this).css({visibility:"hidden",opacity:0})});jQuery("div.related-posts-wrap ul."+temp).css({visibility:"visible",opacity:0,scale:0}).transition({opacity:1,scale:1},300);});var iso_posts;jQuery('.ioa-menu ul li').click(function(){temp=jQuery(this).data('cat');jQuery('div.ioa-menu ul li').removeClass('active');jQuery(this).addClass('active');iso_posts=jQuery(this).parents('.iso-parent').find('.isotope');if(iso_posts.length>0){if(temp=="all"){iso_posts.isotope({filter:"*"});}else{iso_posts.isotope({filter:".category-"+temp});}
return;}
if(utils.exists('blog-format4-posts')){var blog_posts=jQuery(this).parents('.mutual-content-wrap').find('.blog_posts');if(temp=="all"){blog_posts.find('li.post').slideDown('normal');return;}
blog_posts.find('li.post').each(function(){if(!jQuery(this).hasClass("category-"+temp))
jQuery(this).slideUp('slow');else
jQuery(this).slideDown('slow');});}});win.obj.load(function(){if(utils.exists('portfolio-masonry')||utils.exists('proportional-resize')||utils.exists('blog_posts'))iso_layout='masonry';iso_opts={itemSelector:'.isotope li.iso-item ',layoutMode:iso_layout};if(utils.exists('blog_posts'))iso_opts.transformsEnabled=false;if(win.width>767&&jQuery('.isotope').length>0)
jQuery('.isotope').isotope(iso_opts);window.parent.jQuery("body").trigger('radChildReady');jQuery('.blog-format1-posts ul li').waypoint(function(){var c=jQuery(this).find('div.proxy-datearea');var p=jQuery(this).prev();if(p.length>0)
p.find('span.line').animate({height:p.height()+20},500,'',function(){c.transition({height:101},900);});else
c.transition({height:101},900);},{offset:'70%',triggerOnce:true});});jQuery('div.blog-format2-posts ul li').waypoint(function(){var bgc=jQuery(this).data('dbg');var c=jQuery(this).data('dc');if(bgc!="")
jQuery(this).find('a.read-more').transition({backgroundColor:bgc,color:c},'slow');},{offset:'50%',triggerOnce:true});jQuery('div.blog-format6-posts ul li').waypoint(function(){var bgc=jQuery(this).data('dbg');var c=jQuery(this).data('dc');if(bgc!=""){jQuery(this).transition({backgroundColor:bgc,color:c},'slow');jQuery(this).find('a.read-more').transition({borderColor:c,color:c},'slow');}},{offset:'50%',triggerOnce:true});jQuery('div.blog-format5-posts ul li').waypoint(function(){var bgc=jQuery(this).data('dbg');var c=jQuery(this).data('dc');if(bgc!="")
jQuery(this).find('a.read-more').transition({backgroundColor:bgc,color:c},'slow');},{offset:'50%',triggerOnce:true});win.obj.load(function(){jQuery('div.blog-format7-posts ul li').waypoint(function(){var te=jQuery(this),c=jQuery(this).data('dc');if(c!=""){te.find('.desc').animate({color:c},'slow');te.find('span.spacer').animate({backgroundColor:c},'slow');}
te.children('div.overlay').transition({height:jQuery(this).height()+1},'slow');},{offset:'50%',triggerOnce:true});});var month,offset=jQuery('div.timeline-post').length,position,tesfl,circle=jQuery('span.circle');var post_type=circle.data('post_type'),line=jQuery('span.line');var offset_line=0,distance=0;if(utils.exists('timeline-post')){offset_line=line.position().left
jQuery('div.left-post').find('span.dot').css("left",(offset_line-6)+"px");if(jQuery('div.right-post').length>0){distance=jQuery('div.right-post').position().left-offset_line
jQuery('div.right-post').find('span.dot').css("left",-(distance+6)+"px");}
circle.css("left",(offset_line-19)+"px");win.obj.load(function(){jQuery('div.timeline-post').waypoint(function(dir){if(dir=="down"){var c=jQuery(this).data('dc');var bgc=jQuery(this).data('dbg');if(bgc!="")
jQuery(this).find('span.date,a.main-button').transition({color:c,backgroundColor:bgc},500);jQuery(this).find('span.tip,span.dot').css({opacity:0,display:'block',scale:0.2}).transition({scale:1,opacity:1},700,'',function(){jQuery(this).children('span.connector').transition({width:distance},400);});}},{offset:'50%',triggerOnce:true});});circle.waypoint(function(direction){if(direction=="down"){if(jQuery('.post-end').length>0)return;circle.transition({opacity:1},400);month=jQuery('div.posts-timeline').find('h4.month-label').last();offset=jQuery('div.timeline-post').length;jQuery.post(ioa_listener_url,{type:'posts-timeline',action:'ioalistener',id:circle.data('id'),post_type:post_type,offset:offset,month:month.data('month')},function(data){jQuery('span.circle').transition({opacity:0},400);temp=jQuery(jQuery.trim(data));jQuery('div.posts-timeline').append(temp);jQuery('div.posts-timeline').find('div.left-post').find('span.dot').css("left",(offset_line-6)+"px");jQuery('div.posts-timeline').find('div.right-post').find('span.dot').css("left",-(distance+6)+"px");offset=jQuery('div.timeline-post').length;ioapreloader(temp,function(){setTimeout(function(){temp.waypoint(function(dir){if(dir=="down"){var c=jQuery(this).data('dc');var bgc=jQuery(this).data('dbg');if(bgc!="")
jQuery(this).find('span.date,a.main-button').transition({color:c,backgroundColor:bgc},600);jQuery(this).find('span.tip,span.dot').css({opacity:0,display:'block',scale:0.2}).transition({scale:1,opacity:1},700,'',function(){jQuery(this).children('span.connector').transition({width:distance},400);});}},{offset:'50%',triggerOnce:true});},50);});});}},{offset:'bottom-in-view'});}
if(utils.exists('way-animated')){if(win.width<=1024){jQuery('.way-animated').css('opacity',1);}
if(win.width>1024)
jQuery('.way-animated').waypoint(function(dir){if(dir=="down"){var temp=jQuery(this),effect=temp.data('waycheck'),delay=0;if(typeof temp.data('delay')!="undefined")delay=parseInt(temp.data('delay'));if(bowser.msie&&bowser.version<=8)effect='fade';switch(effect){case'fade-left':temp.css({x:-30}).delay(delay).transition({opacity:1,x:0},400);break;case'fade-right':temp.css({x:30}).delay(delay).transition({opacity:1,x:0},400);break;case'fade-top':temp.css({y:-30}).delay(delay).transition({opacity:1,y:0},400);break;case'fade-bottom':temp.css({y:30}).delay(delay).transition({opacity:1,y:0},400);break;case'big-fade-left':temp.css({x:-100}).delay(delay).transition({opacity:1,x:0},700);break;case'big-fade-right':temp.css({x:100}).delay(delay).transition({opacity:1,x:0},700);break;case'big-fade-top':temp.css({y:-100}).delay(delay).transition({opacity:1,y:0},700);break;case'big-fade-bottom':temp.css({y:100}).delay(delay).transition({opacity:1,y:0},700);break;case'scale-in':temp.css({scale:1.5}).delay(delay).transition({opacity:1,scale:1},400);break;case'scale-out':temp.css({scale:0.5}).delay(delay).transition({opacity:1,scale:1},400);break;case'fade':default:temp.delay(delay).transition({opacity:1},400);}}},{offset:'70%',triggerOnce:true});}
if(utils.exists('chain-animated')){if(win.width<=1024){jQuery('.chain-animated').find('.chain-link').css('opacity',1);}
if(win.width>1024)
jQuery('.chain-animated').waypoint(function(dir){if(dir=="down"){var temp=jQuery(this),effect=temp.data('chain'),delay=0;if(bowser.msie&&bowser.version<=8){temp.find('.chain-link').css("opacity",1);return;}
temp.find('.inner-item-wrap').each(function(i){delay=i*100;switch(effect){case'fade-left':jQuery(this).css({x:-30}).delay(delay).transition({opacity:1,x:0},400);break;case'fade-right':jQuery(this).css({x:30}).delay(delay).transition({opacity:1,x:0},400);break;case'fade-top':jQuery(this).css({y:-30}).delay(delay).transition({opacity:1,y:0},400);break;case'fade-bottom':jQuery(this).css({y:30}).delay(delay).transition({opacity:1,y:0},400);break;case'big-fade-left':jQuery(this).css({x:-100}).delay(delay).transition({opacity:1,x:0},700);break;case'big-fade-right':jQuery(this).css({x:100}).delay(delay).transition({opacity:1,x:0},700);break;case'big-fade-top':jQuery(this).css({y:-100}).delay(delay).transition({opacity:1,y:0},700);break;case'big-fade-bottom':jQuery(this).css({y:100}).delay(delay).transition({opacity:1,y:0},700);break;case'scale-in':jQuery(this).css({scale:1.5}).delay(delay).transition({opacity:1,scale:1},400);break;case'scale-out':jQuery(this).css({scale:0.5}).delay(delay).transition({opacity:1,scale:1},400);break;case'fade':default:jQuery(this).delay(delay).transition({opacity:1},400);}});}},{offset:'80%',triggerOnce:true});}
jQuery('.bx-wrapper .bx-controls-direction a').click(function(e){e.preventDefault();});jQuery('div.ioa-menu').find('li').each(function(){jQuery(this).hoverdir();});jQuery('div.ioa-menu a').click(function(e){if(!jQuery(this).next().is(':hidden'))
jQuery(this).next().fadeOut('normal');else
jQuery(this).next().fadeIn('normal');e.preventDefault();});jQuery('div.ioa-menu').hoverIntent(function(e){if(jQuery(this).hasClass('ioa-menu-open'))return;jQuery(this).children('ul').fadeIn('normal');},function(e){if(jQuery(this).hasClass('ioa-menu-open'))return;jQuery(this).children('ul').fadeOut('normal');});var hovers=jQuery('div.hoverable  div.image, div.image-frame');win.obj.load(function(){doc.on('mouseenter','div.hoverable  div.image, div.image-frame ',function(){var h=jQuery(this).find('.hover'),i=h.children('i');i.css({opacity:0,scale:0.5});h.css({opacity:0,display:"block"}).stop(true,true).transition({opacity:0.9},500);setTimeout(function(){h.children('i').transition({opacity:1,scale:1},400);},60);});doc.on('mouseleave','div.hoverable  div.image, div.image-frame ',function(){var h=jQuery(this).find('.hover');h.children('a').transition({opacity:0},400);h.transition({opacity:0},300,'');});});jQuery('ul.single-related-posts li div.image').hover(function(){jQuery(this).children('.hover').stop(true,true).fadeIn(400);},function(){jQuery(this).children('.hover').stop(true,true).fadeOut(400);});jQuery('div.portfolio-list ul li').waypoint(function(){var c=jQuery(this).find('div.proxy-datearea');var p=jQuery(this).prev();c.transition({height:101},900);},{offset:'70%',triggerOnce:true});var button_parent;jQuery('body').bind('adding_to_cart',function(evt,button){button_parent=button.parents('.product');button.fadeOut('fast');button_parent.find('.cart-loader').css({marginTop:-15,opacity:0,display:'block'}).transition({marginTop:0,opacity:1},300,'');button_parent.find('.product-data').transition({opacity:0.6},400);})
jQuery('.ajax-cart-trigger').click(function(e){e,preventDefault();});jQuery('.ajax-cart').hover(function(){jQuery('.ajax-cart-items').css({marginTop:15,opacity:0,display:'block'}).animate({marginTop:0,opacity:1},300,'');},function(){jQuery('.ajax-cart-items').animate({opacity:0,marginTop:15},200,'',function(){jQuery(this).hide();})});jQuery('body').bind('added_to_cart',function(evt,fragments,cart_hash){button_parent.find('.cart-loader').transition({marginTop:-15,opacity:0},300,'',function(){jQuery(this).hide();});button_parent.find('.product-data').transition({opacity:1},400);})
jQuery('.show_review_form').click(function(){jQuery('#review_form').slideToggle('normal');});jQuery('.products li').hover(function(){obj=jQuery(this);obj.find('.button').css({marginTop:-15,display:"block",opacity:0}).transition({opacity:1,marginTop:0},200);},function(){obj=jQuery(this);obj.find('.button').transition({opacity:0,marginTop:-15},200,'',function(){jQuery(this).hide();});});jQuery('div.pagination-dropdown select').change(function(){window.location.href=jQuery(this).val();});win.obj.load(function(){jQuery('div.blog-format4-posts ul li div.post-content-area').each(function(){obj=jQuery(this);if(obj.height()>=250){obj.data('height',obj.height());obj.animate({height:250},'normal');obj.parents('li').find('a.bottom-view-toggle').css('visibility','visible').transition({opacity:1},300);}else{obj.parents('li').find('a.bottom-view-toggle').remove();}});});jQuery('a.bottom-view-toggle').click(function(e){temp=jQuery(this);var cl=temp.parent().find('div.post-content-area');if(temp.hasClass('down-diricon-')){cl.animate({height:cl.data('height')},'normal');temp.addClass('up-diricon-').removeClass('down-diricon-');}else{cl.animate({height:250},'normal');temp.addClass('down-diricon-').removeClass('up-diricon-');}
e.preventDefault();});jQuery('div.map-wrapper').hover(function(){jQuery(this).children('div.overlay-address-area').stop(true,true).fadeOut(700);},function(){jQuery(this).children('div.overlay-address-area').stop(true,true).fadeIn(400);});if(utils.exists('portfolio-masonry')){if(jQuery('.no-posts-found').length>0){jQuery('div.portfolio-masonry').css({background:'none','min-height':0});jQuery('div.portfolio-masonry ul').transition({opacity:1},300);}else{var masonry_items=jQuery('div.portfolio-masonry ul li');masonry_items.find('.image').each(function(){jQuery(this).hoverdir()});win.obj.load(function(){masonry_items.each(function(i){temp=jQuery(this);temp.find('.loader').remove();temp.find('.inner-item-wrap').delay(i*50).transition({opacity:1});});});}}
var portfolio_posts=super_wrapper.find('.portfolio_posts');if(win.width<=1024){jQuery('.theme-header .menu a').on('click touchend',function(e){var el=jQuery(this);var link=el.attr('href');if(link==="#"||link==="http://#"||el.parent().children('.sub-menu').length>0)return;window.location=link;});}
jQuery('div.ioa-menu ul li').on('touchend',function(e){jQuery(this).trigger('click');});if(utils.exists('metro-wrapper')){var metro_lists=jQuery('div.portfolio-metro ul'),metro_items=metro_lists.children();if(bowser.msie&&bowser.version<=8){metro_items.each(function(){jQuery(this).find('div.image-wrap').width(jQuery(this).find('div.image-wrap img').width());});}
var testwidth=metro_lists.first().width();if(jQuery('.no-posts-found').length==0){if(win.width>767){if(metro_lists.last().width()>testwidth)testwidth=metro_lists.last().width();jQuery('div.portfolio-metro').width(testwidth);metro_lists.css('display','block');win.obj.load(function(){jQuery('div.portfolio-metro').height(metro_lists.height()*2);jQuery('div.metro-wrapper').jScrollPane({animateScroll:false,mouseWheelSpeed:80});metro_items.each(function(i){temp=jQuery(this);temp.css({scale:0.5}).delay(i*20).transition({opacity:1,scale:1},700);});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');});}else{metro_items.css('opacity',1);}}else{metro_lists.css('display','block');jQuery('div.portfolio-metro').css('width','auto');}}
if(utils.exists('featured-column')){jQuery('li.featured-block').hover(function(){jQuery(this).find('div.overlay').transition({scale:0,opacity:0},300);},function(){jQuery(this).find('div.overlay').transition({scale:1,opacity:1},300);});jQuery('div.featured-column ul li').waypoint(function(dir){if(dir=="down"){var c=jQuery(this).data('dc');var bgc=jQuery(this).data('dbg');if(bgc!=""){jQuery(this).find('div.title-area,a.read-more').animate({color:c,backgroundColor:bgc},'slow');jQuery(this).find('div.desc').animate({borderColor:bgc},'slow');}}},{offset:'80%',triggerOnce:true});}
if(utils.exists('portfolio-modelie')){var la,modelie_wrap=jQuery('div.portfolio-modelie'),view_pane=modelie_wrap.find('div.view-pane'),view_data,view_scroll,modelie_list=modelie_wrap.find('ul');var calc_height=win.height-(jQuery('div.theme-header').height());var compute_width=0,current_loader,testable_width=responsive.width;if(jQuery('.inner-super-wrapper').hasClass('ioa-boxed-layout'))testable_width=modelie_wrap.width();if(calc_height<200)calc_height=250;jQuery.post(ioa_listener_url,{type:'portfolio_modelie',action:'ioalistener',id:view_pane.data('id'),offset:modelie_list.children('li.post').length,height:calc_height-20,width:responsive.width},function(data){jQuery('div.view-pane ul li.span-class').remove();modelie_list.append(data);view_pane.children('.loader').remove();ioapreloader(modelie_list,function(){modelie_list.children('li').each(function(){temp=jQuery(this);temp.height(calc_height-20);la=temp.find('a.hover-lightbox');compute_width+=jQuery(this).outerWidth();la.css({top:temp.height()/2-la.height()/2-25,left:temp.width()/2-la.width()/2-25});});if(responsive.width>767){view_pane.height(calc_height-20);modelie_list.width(compute_width);setTimeout(function(){view_scroll=view_pane.jScrollPane({mouseWheelSpeed:100});view_data=view_scroll.data('jsp');modelie_list.children('li').each(function(i){temp=jQuery(this);temp.css('background-image','none');temp.find('.loader').remove();temp.children('.inner-item-wrap').stop(true,true).delay(i*90).transition({opacity:1},700);});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');if(bowser.msie&&bowser.version<=8){setTimeout(function(){jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');},300);}},40);}else{modelie_list.find('.inner-item-wrap').css("opacity",1);modelie_list.find('.loader').remove();}});});doc.on('click','a.load-more-posts-button',function(e){e.preventDefault()
current_loader=jQuery(this);current_loader.html(current_loader.data('loading'));jQuery.post(ioa_listener_url,{type:'portfolio_modelie',action:'ioalistener',width:responsive.width,id:view_pane.data('id'),offset:modelie_list.children('li.post').length,height:calc_height-20},function(data){var test=jQuery(jQuery.trim(data));if(!test.hasClass('end-more-posts')){if(responsive.width>767){modelie_list.css("width","20000em");modelie_list.append(test);compute_width=0;ioapreloader(modelie_list,function(){current_loader.parent().animate({width:0},'normal',function(){jQuery(this).remove();modelie_list.children('li').each(function(){temp=jQuery(this);temp.height(calc_height-20);la=temp.find('a.hover-lightbox');compute_width+=jQuery(this).outerWidth();la.css({top:temp.height()/2-la.height()/2-25,left:temp.width()/2-la.width()/2-25});});modelie_list.width(compute_width);setTimeout(function(){view_data.reinitialise();test.each(function(i){temp=jQuery(this);temp.css('background-image','none');temp.find('.loader').remove();temp.children('.inner-item-wrap').stop(true,true).delay(i*90).transition({opacity:1},700);});view_data.scrollByX(testable_width-400,true);jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');},40);});});}else{current_loader.parent().animate({width:0},'normal',function(){jQuery(this).remove();modelie_list.append(test);modelie_list.find('.loader').remove();modelie_list.find('.inner-item-wrap').css("opacity",1);});}}else{current_loader.parent().replaceWith(test);test.stop(true,true).delay(i*90).transition({opacity:1},700);}});});jQuery(document).on('mouseenter','div.view-pane li div.image',function(){jQuery(this).children('.hover').stop(true,true).fadeIn(400);});jQuery(document).on('mouseleave','div.view-pane li div.image',function(){jQuery(this).children('.hover').stop(true,true).fadeOut(400);});}
if(utils.exists('portfolio-full-screen')){var fs_wrap=jQuery('div.portfolio-full-screen'),fsview_pane=fs_wrap.find('div.full-screen-view-pane');var calc_height=win.height-(jQuery('div.theme-header').height());if(calc_height<200)calc_height=250;jQuery.post(ioa_listener_url,{type:'portfolio_fullscreen',action:'ioalistener',id:jQuery('.full-screen-view-pane').data('id'),height:calc_height-83,width:win.width},function(data){if(jQuery(data).find('.no-posts-found').length==0){fsview_pane.append(data);fsview_pane.find('.ioa-gallery').seleneGallery({domMapping:true});}else
fsview_pane.html(jQuery(data).find('.gallery-holder').html());})}
if(utils.exists('portfolio-maerya-list')){if(jQuery('.no-posts-found').length==0){var dybg,dyc,current_obj=null,maerya_list=jQuery('ul.portfolio-maerya-list li'),check_flag=false,dynamic=jQuery('div.dynamic-content');maerya_list.width(maerya_list.parent().width()/4);win.obj.on("debouncedresize",function(event){if(current_obj)
jQuery('.portfolio-maerya-wrap .close-section').trigger('click');maerya_list.width(maerya_list.parent().width()/4);maerya_list.data('width',maerya_list.width());});maerya_list.hover(function(){if(check_flag)return;jQuery(this).find('.hover').stop(true,true).transition({height:470},400);},function(){jQuery(this).find('.hover').stop(true,true).transition({height:0},400);});maerya_list.find('a').click(function(e){if(responsive.width>767)e.preventDefault();});maerya_list.data('width',maerya_list.width());maerya_list.click(function(){current_obj=jQuery(this);if(responsive.width<767){window.location.href=current_obj.find('h2 a').attr('href');return;}
if(bowser.msie&&bowser.version<=8)
current_obj.find('div.stub').transition({left:-(maerya_list.width()+4)},500);else
current_obj.find('div.stub').transition({x:-(maerya_list.width()+4)},500);maerya_list.not(current_obj).transition({width:0},500);current_obj.transition({width:current_obj.parent().width()},500);jQuery('.portfolio-maerya-wrap .close-section').fadeIn('fast');var temp=jQuery(this).find('div.meta-info');check_flag=true;current_obj.find('.hover').stop(true,true).transition({height:0},400,'',function(){});dybg=temp.css('background-color');dyc=temp.css('color');if(!dybg||dybg===""||dybg==="transparent")dybg='';if(!dyc||dyc===""||dyc==="transparent")dyc='inherit';dynamic.css({backgroundColor:dybg,color:dyc});dynamic.html(temp.html());dynamic.show();if(bowser.msie&&bowser.version<=8)
setTimeout(function(){dynamic.transition({top:-(maerya_list.height()+4)},400,'');dynamic.prev().transition({top:-(maerya_list.height()+4)},400,'');},300);else
setTimeout(function(){dynamic.transition({y:-(maerya_list.height()+4)},400,'');dynamic.prev().transition({y:-(maerya_list.height()+4)},400,'');},300);});doc.on('click','a.close-section',function(e){e.preventDefault();if(bowser.msie&&bowser.version<=8){dynamic.transition({top:0},400,'',function(){dynamic.html('');});dynamic.prev().transition({top:0},400,'');}else{dynamic.transition({y:0},400,'',function(){dynamic.html('');});dynamic.prev().transition({y:0},400,'');}
setTimeout(function(){if(bowser.msie&&bowser.version<=8)
current_obj.find('div.stub').transition({left:0},500);else
current_obj.find('div.stub').transition({x:0},500);maerya_list.transition({width:parseInt(maerya_list.data('width'))-0.5},500);},300);jQuery(this).fadeOut('fast');check_flag=false;});}else{jQuery('div.portfolio-maerya div.three_fourth').css('height','auto').removeClass('three_fourth left');jQuery('div.portfolio-maerya div.one_fourth').hide();}}
if(utils.exists('climacon-shortcode')){var cl=null;if(!(bowser.msie&&bowser.version<=8)){jQuery('.climacon-shortcode').each(function(){switch(jQuery(this).data('type')){case"rain":cl=Skycons.RAIN;break;case"partly cloudy day":cl=Skycons.PARTLY_CLOUDY_DAY;break;case"partly cloudy night":cl=Skycons.PARTLY_CLOUDY_NIGHT;break;case"clear day":cl=Skycons.CLEAR_DAY;break;case"clear night":cl=Skycons.CLEAR_NIGHT;break;case"cloudy":cl=Skycons.CLOUDY;break;case"fog":cl=Skycons.FOG;break;case"sleet":cl=Skycons.SLEET;break;case"snow":cl=Skycons.SNOW;break;case"wind":cl=Skycons.WIND;break;}
var skycons=new Skycons({"color":jQuery(this).data('color')});skycons.add(this,cl);skycons.play();});}else{jQuery('.climacon-shortcode').each(function(){switch(jQuery(this).data('type')){case"rain":cl="rain";break;case"partly cloudy day":cl="partly_cloudy_day";break;case"partly cloudy night":cl="partly_cloudy_night";break;case"clear day":cl="clear_day";break;case"clear night":cl="clear_night";break;case"cloudy":cl="cloudy";break;case"fog":cl="fog";break;case"sleet":cl="sleet";break;case"snow":cl="snow";break;case"wind":cl="wind";break;}
jQuery(this).replaceWith('<div class="climafallback"><img src="'+theme_url+'/sprites/i/'+cl+'.jpg" alt="climate image" width="'+jQuery(this).attr('width')+'" height="'+jQuery(this).attr('height')+'" /></div>');});}}
jQuery('a.back-to-top').click(function(e){e.preventDefault();jQuery('body,html').animate({scrollTop:0},'normal');});if(jQuery("a[rel^='prettyPhoto']").length>0&&jQuery('.rad-page-section').length==0)
jQuery("a[rel^='prettyPhoto']").prettyPhoto({social_tools:'',theme:'light_square'});if(jQuery('.rad-page-section').length==0)
jQuery(".gallery-icon>a").prettyPhoto({social_tools:'',theme:'light_square'});if(utils.exists('single-prop-screen-view-pane')){var fsview_pane=jQuery('div.single-prop-screen-view-pane');var calc_height=win.height-(jQuery('div.theme-header').height());if(calc_height<200)calc_height=250;jQuery.post(ioa_listener_url,{type:'single_portfolio_fullscreen',action:'ioalistener',id:jQuery('.single-prop-screen-view-pane').data('id'),height:calc_height-83,width:win.width},function(data){fsview_pane.append(data);fsview_pane.find('.ioa-gallery').seleneGallery({domMapping:true});})}
if(utils.exists('single-full-screen-view-pane')){var fsview_pane=jQuery('div.single-full-screen-view-pane');var calc_height=win.height-(jQuery('div.theme-header').height())-83;if(calc_height<200)calc_height=250;fsview_pane.find('.spfs-gallery').seleneGallery({effect_type:'fade',width:win.width,height:calc_height,duration:5000,autoplay:false,captions:true,arrow_control:true,thumbnails:true});}
if(utils.exists('single-portfolio-modelie')){var la,modelie_wrap=jQuery('div.single-portfolio-modelie'),view_pane=modelie_wrap.find('div.view-pane'),modelie_list=modelie_wrap.find('ul.portfolio_posts');var calc_height=jQuery(window).height()-(jQuery('div.theme-header').height());if(calc_height<200)calc_height=250;var compute_width=0;view_pane.scroll(function(event){event.stopImmediatePropagation();return false;});jQuery.post(ioa_listener_url,{type:'single_portfolio_modelie',action:'ioalistener',id:view_pane.data('id'),height:calc_height-20,width:responsive.width},function(data){view_pane.children('.loader').remove();modelie_list.html(data);if(responsive.width>767){ioapreloader(modelie_list,function(){view_pane.height(calc_height-10);modelie_list.children('li').each(function(){temp=jQuery(this);temp.height(calc_height-10);compute_width+=jQuery(this).outerWidth();});modelie_list.width(compute_width);setTimeout(function(){view_scroll=view_pane.jScrollPane({mouseWheelSpeed:100});view_data=view_scroll.data('jsp');modelie_list.children('li').each(function(i){temp=jQuery(this);temp.css('background-image','none');temp.find('.loader').remove();temp.children('.inner-item-wrap').stop(true,true).delay(i*90).transition({opacity:1},700);});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');},40);setTimeout(function(){view_pane.find('.jspDrag').transition({backgroundColor:view_pane.data('dc')},400);},2000);});}else{modelie_list.find('.inner-item-wrap').css('opacity',1);modelie_list.find('.loader').remove();}});}
if(jQuery('.tweets-wrapper.slider ul').length>0)
jQuery('.tweets-wrapper.slider ul').bxSlider({mode:'fade',adaptiveHeight:true,pager:false,auto:true});doc.on('click','.graph-info-toggle',function(){if(jQuery(this).hasClass('info-2icon-'))
jQuery(this).addClass('cancel-2icon-').removeClass('info-2icon-');else
jQuery(this).removeClass('cancel-2icon-').addClass('info-2icon-');jQuery(this).parent().children('.info-area').fadeToggle('normal');});win.obj.load(function(){jQuery('.prop-wrapper').each(function(){jQuery(this).data({width:jQuery(this).width(),height:jQuery(this).height()});jQuery(this).css({width:jQuery(this).width()*responsive.ratio,height:jQuery(this).height()*responsive.ratio});jQuery(this).find('.prop').each(function(){t=jQuery(this);i=t.children('img');t.css({top:t.data('top')*responsive.ratio,left:t.data('left')*responsive.ratio});i.data({width:i.width(),height:i.height()});i.css({width:i.width()*responsive.ratio,height:i.height()*responsive.ratio});});});if(win.width<=1024)
jQuery('div.prop-wrapper').children().each(function(){jQuery(this).css('opacity',1);});if(win.width>1024)
jQuery('div.prop-wrapper').waypoint(function(){var prop,props=jQuery(this),effect;props.children().each(function(i){prop=jQuery(this);prop.css("z-index",i+1);effect=prop.data('effect');switch(effect){case'fade-left':prop.css({x:-30}).delay(prop.data('delay')).transition({opacity:1,x:0},400);break;case'fade-right':prop.css({x:30}).delay(prop.data('delay')).transition({opacity:1,x:0},400);break;case'fade-top':prop.css({y:-30}).delay(prop.data('delay')).transition({opacity:1,y:0},400);break;case'fade-bottom':prop.css({y:30}).delay(prop.data('delay')).transition({opacity:1,y:0},400);break;case'big-fade-left':prop.css({x:-100}).delay(prop.data('delay')).transition({opacity:1,x:0},700);break;case'big-fade-right':prop.css({x:100}).delay(prop.data('delay')).transition({opacity:1,x:0},700);break;case'big-fade-top':prop.css({y:-100}).delay(prop.data('delay')).transition({opacity:1,y:0},700);break;case'big-fade-bottom':prop.css({y:100}).delay(prop.data('delay')).transition({opacity:1,y:0},700);break;case'scale-in':prop.css({scale:1.5}).delay(prop.data('delay')).transition({opacity:1,scale:1},400);break;case'scale-out':prop.css({scale:0.5}).delay(prop.data('delay')).transition({opacity:1,scale:1},400);break;case'fade':default:prop.delay(prop.data('delay')).transition({opacity:1},400);}});},{offset:'70%',triggerOnce:true});});var msearch_parent=jQuery('div.majax-search'),msearch_loader=msearch_parent.find('span.msearch-loader');jQuery('.majax-search-pane input[type=text]').keyup(function(e){var val=jQuery(this).val().length;if(e.keyCode==27){jQuery('a.majax-search-trigger').trigger('click');return;}
if(val>=2){msearch_loader.fadeIn('fast');jQuery.post(msearch_parent.data('url'),{type:'search',action:'ioalistener',query:jQuery(this).val()},function(data){if(jQuery.trim(data)=="")return;msearch_parent.find('.no-results').fadeOut('fast');msearch_parent.find('.msearch-results ul').html(data);msearch_parent.find('div.msearch-results').stop(true,true).fadeIn('fast',function(){msearch_loader.fadeOut('fast');});});}else{msearch_parent.find('div.msearch-results').hide();msearch_parent.find('.msearch-results ul').html('');}});jQuery('a.majax-search-trigger').click(function(e){e.preventDefault();temp=msearch_parent.find('div.majax-search-pane');if(temp.is(":hidden")){jQuery('a.majax-search-trigger').addClass('active');jQuery('body,html').animate({scrollTop:0},'normal');}else{jQuery('a.majax-search-trigger').removeClass('active');}
temp.stop(true,true).slideToggle('normal');});jQuery('a.majax-search-close').click(function(e){e.preventDefault();temp.stop(true,true).slideToggle('normal');jQuery('a.majax-search-trigger').removeClass('active');});jQuery('.person-info-toggle').click(function(){if(jQuery(this).hasClass('info-2icon-')){jQuery(this).addClass('cancel-2icon-').removeClass('info-2icon-');jQuery(this).parent().children('.desc').css({opacity:0,scale:0.5,display:"block"}).transition({opacity:0.95,scale:1},400);}else{jQuery(this).removeClass('cancel-2icon-').addClass('info-2icon-');jQuery(this).parent().children('.desc').transition({opacity:0,scale:0},400);}});if(utils.exists('menu-centered')){jQuery('.menu-centered .menu,.menu-centered .top-area-social-list').each(function(){Menu_builder.center(jQuery(this));});}
function PageWidgets(obj){var t,n,minx,vals;obj.find('.way-animated, .chain-animated .chain-link').css("opacity",1);obj.find(".ioa_tabs").tabs({show:{effect:"fadeIn",duration:300}});obj.find(".ioa_accordion").accordion({create:function(event,ui){ui.header.find('i').removeClass('down-diricon-').addClass('up-diricon-')},beforeActivate:function(event,ui){ui.newHeader.find('i').removeClass('down-diricon-').addClass('up-diricon-');ui.oldHeader.find('i').addClass('down-diricon-').removeClass('up-diricon-');},heightStyle:"content"});obj.find('.ioa-gallery').seleneGallery({domMapping:true});obj.find('.ioaslider').quartzSlider({domMapping:true});obj.find('ul.rad-testimonials-list').bxSlider({mode:'horizontal',adaptiveHeight:true,pager:false,auto:true});obj.find('.isotope').isotope(iso_opts);obj.find('.scrollable').each(function(){t=jQuery(this).parent().width();n=jQuery(this).children().width()+20;minx=Math.ceil(t/n);jQuery(this).bxSlider({slideWidth:n,maxSlides:minx,moveSlides:minx,infiniteLoop:false,slideMargin:20,pager:false});});obj.find('.line-chart-wrap').each(function(){temp=jQuery(this),vals;var ds=[];temp.find('.line-val').each(function(i){vals=jQuery(this).data('values').toString();if(vals.indexOf(',')!=-1){vals=vals.split(',');}else
vals=[parseInt(vals)];for(var j=0;j<vals.length;j++)vals[j]=parseInt(vals[j]);ds[i]={fillColor:jQuery(this).data('fillcolor'),strokeColor:jQuery(this).data('strokecolor'),pointColor:jQuery(this).data('pointcolor'),pointStrokeColor:jQuery(this).data('pointstrokecolor'),data:vals};});var data={labels:temp.data('labels').split(','),datasets:ds}
var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).Line(data,options);});obj.find('.progress-bar-group').each(function(){jQuery(this).find('div.progress-bar').each(function(i){jQuery(this).find('div.filler').delay(i*100).transition({opacity:1,width:parseInt(jQuery(this).find('div.filler').data('fill'))+"%"},1500,'easeInOutQuint',function(){jQuery(this).children().fadeIn('fast');});});});obj.find('.polar-chart-wrap').each(function(){temp=jQuery(this);var ds=[],total=0;temp.find('.polar-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.polar-val').each(function(j){ds[j]={value:parseInt(jQuery(this).data('value')),color:jQuery(this).data('fillcolor')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).PolarArea(ds,options);});obj.find('.pie-chart-wrap').each(function(){temp=jQuery(this);var ds=[],total=0;temp.find('.pie-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.pie-val').each(function(i){ds[i]={color:jQuery(this).data('fillcolor'),value:jQuery(this).data('value')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);new Chart(ctx).Pie(ds,{animateScale:true,animationEasing:"easeOutExpo"});});obj.find('.donut-chart-wrap').each(function(){temp=jQuery(this);temp=jQuery(this);var ds=[],total=0;temp.find('.donut-val').each(function(i){total+=parseInt(jQuery(this).data('value'));});temp.find('.donut-val').each(function(i){ds[i]={color:jQuery(this).data('fillcolor'),value:jQuery(this).data('value')};jQuery(this).children('.block').html(Math.round(parseInt(jQuery(this).data('value'))/total*1000)/10+"%");});var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);new Chart(ctx).Doughnut(ds,{animationEasing:"easeOutExpo"});});obj.find('.bar-chart-wrap').each(function(){temp=jQuery(this);var ds=[],j;temp.find('.bar-val').each(function(i){vals=jQuery(this).data('values').toString();if(vals.indexOf(',')!=-1){vals=vals.split(',');}else
vals=[parseInt(vals)];for(var j=0;j<vals.length;j++)vals[j]=parseInt(vals[j]);ds[i]={fillColor:jQuery(this).data('fillcolor'),strokeColor:jQuery(this).data('strokecolor'),data:vals};});var data={labels:temp.data('labels').split(','),datasets:ds}
var ctx=temp.children('canvas')[0].getContext("2d");var myNewChart=new Chart(ctx);var options={};if(bowser.msie&&bowser.version<=8)options.animation=false;new Chart(ctx).Bar(data,options);});obj.find('div.circles-group').each(function(){var parentw=jQuery(this).width();if(parentw>=jQuery(this).parent().width()){parentw=jQuery(this).parent().width();jQuery(this).width(parentw);jQuery(this).height(parentw);}
jQuery(this).find('div.circle').each(function(j){jQuery(this).css({"left":(parentw-parseInt(jQuery(this).data('fill'))/100*parentw)/2,scale:0.2});jQuery(this).delay(j*100).transition({opacity:1,scale:1,width:parseInt(jQuery(this).data('fill'))+"%",height:parseInt(jQuery(this).data('fill'))+"%"},500);});});obj.find('.radial-chart').each(function(){w=jQuery(this).data('width');if(w>jQuery(this).width())w=jQuery(this).width()-20;jQuery(this).easyPieChart({size:w,lineWidth:jQuery(this).data('line_width'),barColor:jQuery(this).data('bar_color'),trackColor:jQuery(this).data('track_color'),scaleColor:false,lineCap:"butt",animate:2000}).data('easyPieChart').update(jQuery(this).data('start_percent'));});}
win.obj.on("debouncedresize",function(event){responsive.ratio=jQuery('.skeleton').width()/1060;responsive.width=win.obj.width();responsive.height=win.obj.height();if(responsive.width<767){responsive.ratio=(win.obj.width()*0.7)/1060;}
resizable();});window.onorientationchange=function(){responsive.ratio=jQuery('.skeleton').width()/1060;responsive.width=win.obj.width();responsive.height=win.obj.height();if(responsive.width<767){responsive.ratio=(win.obj.width()*0.7)/1060;}
resizable();setTimeout(function(){resizable();},150);};function resizable(){var t,i,k;if(jQuery('.isotope').length>0&&jQuery('.rad-page-section').length==0)
jQuery('.isotope').isotope('reLayout');if(responsive.width>767)
jQuery('#mobile-menu').hide();if(utils.exists('prop-wrapper')){jQuery('.prop-wrapper').each(function(){jQuery(this).css({width:jQuery(this).data('width')*responsive.ratio,height:jQuery(this).data('height')*responsive.ratio});jQuery(this).find('.prop').each(function(){t=jQuery(this);i=t.children('img');t.css({top:t.data('top')*responsive.ratio,left:t.data('left')*responsive.ratio});i.css({width:i.data('width')*responsive.ratio,height:i.data('height')*responsive.ratio});});});}
if(utils.exists('single-portfolio-modelie')){var la,modelie_wrap=jQuery('div.single-portfolio-modelie'),view_pane=modelie_wrap.find('div.view-pane'),view_data,modelie_list=modelie_wrap.find('ul');var compute_width=0,calc_height=win.height-(jQuery('div.theme-header').height());if(calc_height<200)calc_height=250;if(responsive.width>767){view_pane.width(responsive.width);modelie_wrap.find('ul.portfolio_posts li').each(function(){compute_width+=jQuery(this).outerWidth();});modelie_list.width(compute_width);view_pane.height(calc_height-10);view_pane.jScrollPane({mouseWheelSpeed:100});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');}else{view_data=jQuery('div.view-pane').data('jsp');if(view_data){view_data.destroy();}
modelie_list.width(responsive.width);view_pane.css('height','auto');}}
if(utils.exists('portfolio-modelie')){var la,modelie_wrap=jQuery('div.portfolio-modelie'),view_pane=modelie_wrap.find('div.view-pane'),view_data,modelie_list=modelie_wrap.find('ul');var compute_width=0,calc_height=win.height-(jQuery('div.theme-header').height());if(calc_height<200)calc_height=250;if(responsive.width>767){view_pane.width(responsive.width);view_pane.height(calc_height-16);modelie_list.children('li').each(function(){temp=jQuery(this);la=temp.find('a.hover-lightbox');compute_width+=jQuery(this).outerWidth();la.css({top:temp.height()/2-la.height()/2-25,left:temp.width()/2-la.width()/2-25});});modelie_list.width(compute_width);view_pane.jScrollPane({mouseWheelSpeed:100});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');}else{view_data=jQuery('div.view-pane').data('jsp');if(view_data){view_data.destroy();}
modelie_list.width(responsive.width);modelie_list.children('li').each(function(){temp=jQuery(this);la=temp.find('a.hover-lightbox');la.css({top:temp.height()/2-la.height()/2-25,left:temp.width()/2-la.width()/2-25});});view_pane.css('height','auto');}}
if(utils.exists('metro-wrapper')){if(jQuery('.no-posts-found').length==0){var dpi=jQuery('div.metro-wrapper').data('jsp');if(responsive.width>767){jQuery('div.portfolio-metro').css("width","2000em");metro_lists.css('display','inline-block')
var testwidth=metro_lists.first().width();if(metro_lists.last().width()>testwidth)testwidth=metro_lists.last().width();jQuery('div.portfolio-metro').css({"height":metro_lists.height()*2,"width":testwidth});jQuery('div.metro-wrapper').jScrollPane({animateScroll:false,mouseWheelSpeed:80});jQuery('.jspHorizontalBar').animate({height:25},'fast');jQuery('.jspDrag').stop(true,true).animate({height:22},'fast');jQuery('div.portfolio-metro').height(metro_lists.height()*2);}else{if(dpi)
dpi.destroy();metro_items.css('opacity',1);jQuery('div.portfolio-metro').width(responsive.width);jQuery('div.portfolio-metro').css('height','auto');}}else{metro_lists.css('display','block');jQuery('div.portfolio-metro').css('width','auto');}}
if(utils.exists('timeline-post')){offset=jQuery('div.timeline-post').length;offset_line=line.position().left;jQuery('div.left-post').find('span.dot').css("left",(offset_line-6)+"px");if(jQuery('div.right-post').length>0){distance=jQuery('div.right-post').position().left-offset_line
jQuery('div.right-post').find('span.dot').css("left",-(distance+6)+"px");}
circle.css("left",(offset_line-15)+"px");jQuery('div.timeline-post').find('span.connector').transition({width:distance},400);}
if(compact_menu.length>0){compact_bar.css({'display':'block','visibility':'hidden'});var cposi=compact_bar.find('.menu-wrapper').position().left;compact_menu.children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(cposi+jQuery(this).position().left)+"px");}});compact_bar.css({'display':'none','visibility':'visible'});}
if(menu_area.find('.menu').length>0){var posi=menu_area.find('.menu-wrapper').position().left;if(posi===0){posi=menu_area.find('.skeleton').width()/2-menu_area.find('.menu-wrapper').width()/2;}
menu_area.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}
if(jQuery('.fluid-menu').length>0){jQuery(this).find('div.sub-menu').width(responsive.width);}});}
if(topbar.find('.menu').length>0){var posi=topbar.find('.menu-wrapper').position().left;if(posi===0){posi=topbar.find('.skeleton').width()/2-topbar.find('.menu-wrapper').width()/2;}
topbar.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}});}
if(bottombar.find('.menu').length>0){var posi=bottombar.find('.menu-wrapper').position().left;if(posi===0){posi=bottombar.find('.skeleton').width()/2-bottombar.find('.menu-wrapper').width()/2;}
bottombar.find('.menu').children('li').each(function(){if(jQuery(this).find('div.sub-menu').length>0){jQuery(this).find('div.sub-menu').css("left",-(posi+jQuery(this).position().left)+"px");}});}
jQuery('div.circles-group').each(function(){var parentw=jQuery(this).width();if(parentw>=jQuery(this).parent().width()){parentw=jQuery(this).parent().width();jQuery(this).width(parentw);jQuery(this).height(parentw);}
jQuery(this).find('div.circle').each(function(j){jQuery(this).css({"left":(parentw-parseInt(jQuery(this).data('fill'))/100*parentw)/2,scale:0.2});jQuery(this).delay(j*100).transition({opacity:1,scale:1,width:parseInt(jQuery(this).data('fill'))+"%",height:parseInt(jQuery(this).data('fill'))+"%"},500);});});if(responsive.width<767){jQuery('#mobile-logo').width(jQuery('#mobile-logo img').width());jQuery('div.mobile-head img').transition({opacity:1},400);}
if(jQuery('.mobile-side-wrap').length>0){jQuery('div.mobile-side-wrap').height(responsive.height);jQuery('#mobile-side-menu').height(responsive.height-45);var sidemobile=jQuery('#mobile-side-menu').data('jsp');if(typeof sidemobile!=="undefined")sidemobile.reinitialise();else jQuery('#mobile-side-menu').jScrollPane({mouseWheelSpeed:80});}}
if(win.width<767){win.obj.load(function(){jQuery('#mobile-logo').width(jQuery('#mobile-logo img').width());jQuery('div.mobile-head img').transition({opacity:1},400);});}
var sidemobile=null;if(jQuery('.mobile-side-wrap').length>0){jQuery('div.mobile-side-wrap').height(responsive.height);jQuery('#mobile-side-menu').height(responsive.height-45);jQuery('#mobile-side-menu').jScrollPane({mouseWheelSpeed:80});sidemobile=jQuery('#mobile-side-menu').data('jsp');}
jQuery('#mobile-side-menu li a').click(function(e){if(jQuery(this).parent().children('.sub-menu').length>0){e.preventDefault();jQuery(this).parent().children('i').toggleClass('plus-2icon- minus-2icon-');jQuery(this).parent().children('.sub-menu').slideToggle('normal',function(){setTimeout(function(){sidemobile.reinitialise();},200);});}});jQuery('#mobile-menu,#mobile-side-menu').find('li').each(function(){if(jQuery(this).children('.sub-menu').length>0)jQuery(this).append('<i class="ioa-front-icon plus-2icon-"></i>');});jQuery('a.mobile-menu').click(function(e){e.preventDefault();if(jQuery('#mobile-menu').length>0){jQuery('body,html').animate({scrollTop:0},'normal');jQuery('#mobile-menu').slideToggle('normal');}else{if(jQuery('.mobile-side-wrap').offset().left===0){jQuery('.mobile-side-wrap').transition({left:-210},400);}else{jQuery('.mobile-side-wrap').transition({left:0},400);}}});jQuery('#mobile-menu li i').click(function(e){if(jQuery(this).parent().children('.sub-menu').length>0){e.preventDefault();jQuery(this).parent().children('.sub-menu').slideToggle('normal');jQuery(this).toggleClass('plus-2icon- minus-2icon-');}});}
jQuery(main_code);function ioapreloader(obj,callback){var images=[];images=jQuery.makeArray(obj.find('img'));var limit=images.length,timer,i,index;timer=setInterval(function(){if(limit<=0){callback();clearInterval(timer);return;}
for(i=0;i<images.length;i++){if(images[i].complete||images[i].readyState==4){images.splice(i,1);limit--;}}},200);}
function getElementsByClassName(node,classname){var a=[];var re=new RegExp('(^| )'+classname+'( |$)');var els=node.getElementsByTagName("*");for(var i=0,j=els.length;i<j;i++)
if(re.test(els[i].className))a.push(els[i]);return a;}
function validateEmail(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}